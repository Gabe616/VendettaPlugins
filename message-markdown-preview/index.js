(function(l,a,y,R,e,w,C,v,d){"use strict";const{Animated:f}=e.ReactNative;function N(o){let{duration:i,children:n,style:c,fade:t,customOpacity:u}=o;const r=e.React.useRef(new f.Value(t==="in"?0:1)).current;return e.React.useEffect(function(){f.timing(r,{toValue:u??(t==="in"?1:0),duration:i,useNativeDriver:!0}).start()},[r,t,u]),e.React.createElement(f.View,{style:[c,{opacity:r}]},n)}const{ScrollView:I,Pressable:b,View:E}=v.General,s=40,h=e.stylesheet.createThemedStyleSheet({androidRipple:{color:d.semanticColors.ANDROID_RIPPLE,cornerRadius:2147483647},actionButton:{borderRadius:2147483647,height:s,width:s,marginHorizontal:4,flexShrink:0,flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:d.semanticColors.BACKGROUND_SECONDARY_ALT,marginLeft:8,marginTop:-4},actionIcon:{tintColor:d.semanticColors.INTERACTIVE_NORMAL,width:s*.6,height:s*.6}}),{default:m}=a.findByProps("DCDAutoModerationSystemMessageView"),A=a.findByName("MessageRecord"),D=a.findByName("RowManager"),S=a.findByStoreName("SelectedChannelStore"),T=a.findByStoreName("UserStore");function x(o){let{inputProps:i}=o;const n=e.React.useRef(null);i.onChangeText?y.after("onChangeText",i,function(r){let[_]=r;return n.current=_},!0):i.onChangeText=function(r){return n.current=r};const c=function(){w.showConfirmationAlert({title:"Message Preview",onConfirm:function(){},children:e.React.createElement(I,{style:{marginVertical:12,maxHeight:e.ReactNative.Dimensions.get("window").height*.7}},e.React.createElement(m,{rowGenerator:new D,message:new A({id:"0",channel_id:S.getChannelId(),author:T.getCurrentUser(),content:n.current})}))})},t=n.current?.length>0,u=t?b:E;return e.React.createElement(N,{style:{flexDirection:"row",position:"absolute",left:0,top:-s,zIndex:3},duration:100,fade:t?"in":"out"},e.React.createElement(u,{android_ripple:h.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityState:{disabled:!1,expanded:!1},accessibilityLabel:"Open markdown preview",accessibilityHint:"Open a modal which shows your message's markdown preview",onPress:t?c:void 0,style:h.actionButton},e.React.createElement(e.ReactNative.Image,{style:h.actionIcon,source:C.getAssetIDByName("ic_eye")})))}const{ChatInput:B}=a.findByProps("ChatInput");let p=[];function P(){return p.push(y.after("render",B.prototype,function(o,i){const n=R.findInReactTree(i,function(t){return typeof t?.placeholder=="string"});if(!n?.onChangeText)return;const c=R.findInReactTree(i,function(t){return t?.type?.displayName==="View"&&Array.isArray(t?.props?.children)})?.props?.children;c&&c.unshift(React.createElement(x,{inputProps:n}))})),function(){p.forEach(function(o){return o()}),p=[]}}let g;var V={onLoad:function(){return g=P()},onUnload:function(){return g?.()}};return l.default=V,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.metro.common,vendetta.ui.alerts,vendetta.ui.assets,vendetta.ui.components,vendetta.ui);
