(function(l,c,p,y,n,R,w,C,u){"use strict";const{Animated:d}=n.ReactNative;function v(a){let{duration:o,children:t,style:i,fade:r}=a;const e=n.React.useRef(new d.Value(r==="in"?0:1)).current;return n.React.useEffect(function(){d.timing(e,{toValue:r==="in"?1:0,duration:o,useNativeDriver:!0}).start()},[e,r]),n.React.createElement(d.View,{style:[i,{opacity:e}]},t)}const{Pressable:b}=C.General,{default:m}=c.findByProps("renderMessageMarkupToAST");c.findByName("MessagePreview",!1),c.findByStoreName("UserStore"),c.findByStoreName("SelectedChannelStore");function I(a){let{thing:o}=a;const t=40,i=n.stylesheet.createThemedStyleSheet({androidRipple:{color:u.semanticColors.ANDROID_RIPPLE,cornerRadius:2147483647},actionButton:{borderRadius:2147483647,height:t,width:t,marginHorizontal:4,flexShrink:0,flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:u.semanticColors.BACKGROUND_SECONDARY,marginLeft:8,marginTop:-4},actionIcon:{tintColor:u.semanticColors.INTERACTIVE_NORMAL,width:t*.6,height:t*.6}}),[r,e]=n.React.useState("");o.runner=function(h){return e(h)};const f=function(){const h=m({content:r,embeds:[]},{hideSimpleEmbedContent:!0,formatInline:!1,allowHeading:!0,allowList:!0,allowLinks:!1,previewLinkTarget:!1}).content;R.showConfirmationAlert({title:"Markdown Preview",content:h,confirmText:"Ok",confirmColor:"grey",onConfirm:function(){}})};return n.React.createElement(v,{style:{flexDirection:"row",position:"absolute",left:0,top:-t,zIndex:3},duration:100,fade:r.length>0?"in":"out"},n.React.createElement(b,{android_ripple:i.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityState:{disabled:!1,expanded:!1},accessibilityLabel:"Open markdown preview",accessibilityHint:"Open a modal which shows your message's markdown preview",onPress:f,style:i.actionButton,children:n.React.createElement(n.ReactNative.Image,{style:i.actionIcon,source:w.getAssetIDByName("ic_eye")})}))}const{ChatInput:S}=c.findByProps("ChatInput");let s=[];function T(){return s.push(p.after("render",S.prototype,function(a,o){const t=y.findInReactTree(o,function(e){return typeof e?.placeholder=="string"});if(!t?.onChangeText)return;const i=y.findInReactTree(o,function(e){return e?.type?.displayName==="View"&&Array.isArray(e?.props?.children)})?.props?.children;if(!i)return;let r={runner:function(){}};t.onChangeText?s.push(p.after("onChangeText",t,function(e){let[f]=e;return r.runner(f)},!0)):t.onChangeText=function(e){return r.runner(e)},i.unshift(React.createElement(I,{thing:r}))})),function(){s.forEach(function(a){return a()}),s=[]}}let g;var N={onLoad:function(){return g=T()},onUnload:function(){return g?.()}};return l.default=N,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.metro.common,vendetta.ui.alerts,vendetta.ui.assets,vendetta.ui.components,vendetta.ui);
