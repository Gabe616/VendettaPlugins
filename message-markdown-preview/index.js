(function(s,p,h,y,t,R,w,C,l){"use strict";const{Animated:u}=t.ReactNative;function v(a){let{duration:o,children:e,style:i}=a;const n=t.React.useRef(new u.Value(0)).current;return t.React.useEffect(function(){u.timing(n,{toValue:1,duration:o,useNativeDriver:!0}).start()},[n]),t.React.createElement(u.View,{style:[i,{opacity:n}]},e)}const{Pressable:m,Text:x}=C.General,{default:I}=p.findByProps("renderMessageMarkupToAST");function b(a){let{thing:o}=a;const e=40,i=t.stylesheet.createThemedStyleSheet({androidRipple:{color:l.semanticColors.ANDROID_RIPPLE,cornerRadius:2147483647},actionButton:{borderRadius:2147483647,height:e,width:e,marginHorizontal:4,flexShrink:0,flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:l.semanticColors.BACKGROUND_SECONDARY,marginLeft:8,marginTop:-4},actionIcon:{tintColor:l.semanticColors.INTERACTIVE_NORMAL,width:e*.6,height:e*.6}}),[n,r]=t.React.useState("");o.runner=function(f){return r(f)};const d=function(){const f=I({content:n,embeds:[]},{hideSimpleEmbedContent:!0,formatInline:!1,allowHeading:!0,allowList:!0,allowLinks:!1,previewLinkTarget:!1}).content;R.showConfirmationAlert({title:"Markdown Preview",content:f,confirmText:"Ok",confirmColor:"grey",onConfirm:function(){}})};return n.length>0&&t.React.createElement(v,{style:{flexDirection:"row",position:"absolute",left:0,top:-e,zIndex:3},duration:100},t.React.createElement(m,{android_ripple:i.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityState:{disabled:!1,expanded:!1},accessibilityLabel:"Open markdown preview",accessibilityHint:"Open a modal which shows your message's markdown preview",onPress:d,style:i.actionButton,children:t.React.createElement(t.ReactNative.Image,{style:i.actionIcon,source:w.getAssetIDByName("ic_eye")})}))}const{ChatInput:T}=p.findByProps("ChatInput");let c=[];function A(){return c.push(h.after("render",T.prototype,function(a,o){const e=y.findInReactTree(o,function(r){return typeof r?.placeholder=="string"});if(!e?.onChangeText)return;const i=y.findInReactTree(o,function(r){return r?.type?.displayName==="View"&&Array.isArray(r?.props?.children)})?.props?.children;if(!i)return;let n={runner:function(){}};e.onChangeText?c.push(h.after("onChangeText",e,function(r){let[d]=r;return n.runner(d)},!0)):e.onChangeText=function(r){return n.runner(r)},i.unshift(React.createElement(b,{thing:n}))})),function(){c.forEach(function(a){return a()}),c=[]}}let g;var E={onLoad:function(){return g=A()},onUnload:function(){return g?.()}};return s.default=E,Object.defineProperty(s,"__esModule",{value:!0}),s})({},vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.metro.common,vendetta.ui.alerts,vendetta.ui.assets,vendetta.ui.components,vendetta.ui);
