(function(l,i,y,R,e,w,C,v,u){"use strict";const{Animated:d}=e.ReactNative;function N(a){let{duration:r,children:n,style:o,fade:t}=a;const s=e.React.useRef(new d.Value(t==="in"?0:1)).current;return e.React.useEffect(function(){d.timing(s,{toValue:t==="in"?1:0,duration:r,useNativeDriver:!0}).start()},[s,t]),e.React.createElement(d.View,{style:[o,{opacity:s}]},n)}const{ScrollView:I,Pressable:b,View:E}=v.General,c=40,f=e.stylesheet.createThemedStyleSheet({androidRipple:{color:u.semanticColors.ANDROID_RIPPLE,cornerRadius:2147483647},actionButton:{borderRadius:2147483647,height:c,width:c,marginHorizontal:4,flexShrink:0,flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:u.semanticColors.BACKGROUND_SECONDARY_ALT,marginLeft:8,marginTop:-4},actionIcon:{tintColor:u.semanticColors.INTERACTIVE_NORMAL,width:c*.6,height:c*.6}}),{default:A}=i.findByProps("DCDAutoModerationSystemMessageView"),m=i.findByName("MessageRecord"),D=i.findByName("RowManager"),S=i.findByStoreName("SelectedChannelStore"),T=i.findByStoreName("UserStore");function x(a){let{inputProps:r}=a;const n=e.React.useRef(null);r.onChangeText?y.after("onChangeText",r,function(p){let[_]=p;return n.current=_},!0):r.onChangeText=function(p){return n.current=p};const o=function(){w.showConfirmationAlert({title:"Message Preview",onConfirm:function(){},children:e.React.createElement(I,{style:{marginVertical:12,maxHeight:e.ReactNative.Dimensions.get("window").height*.7}},e.React.createElement(A,{rowGenerator:new D,message:new m({id:"0",channel_id:S.getChannelId(),author:T.getCurrentUser(),content:n.current})}))})},t=n.current?.length>0,s=t?b:E;return e.React.createElement(N,{style:{flexDirection:"row",position:"absolute",left:0,top:-c,zIndex:3},duration:100,fade:t?"in":"out"},e.React.createElement(s,{android_ripple:f.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityState:{disabled:!1,expanded:!1},accessibilityLabel:"Open markdown preview",accessibilityHint:"Open a modal which shows your message's markdown preview",onPress:t?o:void 0,style:f.actionButton},e.React.createElement(e.ReactNative.Image,{style:f.actionIcon,source:C.getAssetIDByName("ic_eye")})))}const{ChatInput:B}=i.findByProps("ChatInput");let h=[];function P(){return h.push(y.after("render",B.prototype,function(a,r){const n=R.findInReactTree(r,function(t){return typeof t?.placeholder=="string"});if(!n?.onChangeText)return;const o=R.findInReactTree(r,function(t){return t?.type?.displayName==="View"&&Array.isArray(t?.props?.children)})?.props?.children;o&&o.unshift(React.createElement(x,{inputProps:n}))})),function(){h.forEach(function(a){return a()}),h=[]}}let g;var V={onLoad:function(){return g=P()},onUnload:function(){return g?.()}};return l.default=V,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.metro.common,vendetta.ui.alerts,vendetta.ui.assets,vendetta.ui.components,vendetta.ui);
