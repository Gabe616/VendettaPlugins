(function(s,p,h,y,t,g,w,v,l){"use strict";const{Animated:u}=t.ReactNative;function C(a){let{duration:o,children:e,style:i}=a;const n=t.React.useRef(new u.Value(0)).current;return t.React.useEffect(function(){u.timing(n,{toValue:1,duration:o,useNativeDriver:!0}).start()},[n]),t.React.createElement(u.View,{style:[i,{opacity:n}]},e)}const{Pressable:I,Text:T}=v.General,{parse:b}=p.findByProps("parse","parseTopic");function E(a){let{thing:o}=a;const e=40,i=t.stylesheet.createThemedStyleSheet({androidRipple:{color:l.semanticColors.ANDROID_RIPPLE,cornerRadius:2147483647},actionButton:{borderRadius:2147483647,height:e,width:e,marginHorizontal:4,flexShrink:0,flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:l.semanticColors.BACKGROUND_SECONDARY,marginLeft:8,marginTop:-4},actionIcon:{tintColor:l.semanticColors.INTERACTIVE_NORMAL,width:e*.6,height:e*.6}}),[n,r]=t.React.useState("");o.runner=function(f){return r(f)};const d=function(){const f=b(n,!0,{allowHeading:!0,allowLinks:!1,allowList:!0,previewLinkTarget:!1});g.showConfirmationAlert({title:"Markdown Preview",content:t.React.createElement(T,null,f),confirmText:"Ok",confirmColor:"grey",onConfirm:function(){}})};return n.length>0&&t.React.createElement(C,{style:{flexDirection:"row",position:"absolute",left:0,top:-e,zIndex:3},duration:100},t.React.createElement(I,{android_ripple:i.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityState:{disabled:!1,expanded:!1},accessibilityLabel:"Open markdown preview",accessibilityHint:"Open a modal which shows your message's markdown preview",onPress:d,style:i.actionButton,children:t.React.createElement(t.ReactNative.Image,{style:i.actionIcon,source:w.getAssetIDByName("ic_eye")})}))}const{ChatInput:m}=p.findByProps("ChatInput");let c=[];function x(){return c.push(h.after("render",m.prototype,function(a,o){const e=y.findInReactTree(o,function(r){return typeof r?.placeholder=="string"});if(!e?.onChangeText)return;const i=y.findInReactTree(o,function(r){return r?.type?.displayName==="View"&&Array.isArray(r?.props?.children)})?.props?.children;if(!i)return;let n={runner:function(){}};e.onChangeText?e.onChangeText=function(r){return n.runner(r)}:c.push(h.after("onChangeText",e,function(r){let[d]=r;return n.runner(d)})),i.unshift(React.createElement(E,{thing:n}))})),function(){c.forEach(function(a){return a()}),c=[]}}let R;var A={onLoad:function(){return R=x()},onUnload:function(){return R?.()}};return s.default=A,Object.defineProperty(s,"__esModule",{value:!0}),s})({},vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.metro.common,vendetta.ui.alerts,vendetta.ui.assets,vendetta.ui.components,vendetta.ui);
