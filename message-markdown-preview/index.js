(function(l,i,p,y,e,g,w,C,u){"use strict";const{Animated:d}=e.ReactNative;function v(a){let{duration:r,children:n,style:o,fade:t}=a;const s=e.React.useRef(new d.Value(t==="in"?0:1)).current;return e.React.useEffect(function(){d.timing(s,{toValue:t==="in"?1:0,duration:r,useNativeDriver:!0}).start()},[s,t]),e.React.createElement(d.View,{style:[o,{opacity:s}]},n)}const{ScrollView:I,Pressable:N}=C.General,c=40,f=e.stylesheet.createThemedStyleSheet({androidRipple:{color:u.semanticColors.ANDROID_RIPPLE,cornerRadius:2147483647},actionButton:{borderRadius:2147483647,height:c,width:c,marginHorizontal:4,flexShrink:0,flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:u.semanticColors.BACKGROUND_SECONDARY_ALT,marginLeft:8,marginTop:-4},actionIcon:{tintColor:u.semanticColors.INTERACTIVE_NORMAL,width:c*.6,height:c*.6}}),{default:b}=i.findByProps("DCDAutoModerationSystemMessageView"),A=i.findByName("MessageRecord"),E=i.findByName("RowManager"),S=i.findByStoreName("SelectedChannelStore"),m=i.findByStoreName("UserStore");function D(a){let{inputProps:r}=a;const n=e.React.useRef(null);r.onChangeText?p.after("onChangeText",r,function(t){let[s]=t;return n.current=s},!0):r.onChangeText=function(t){return n.current=t};const o=function(){g.showConfirmationAlert({title:"Message Preview",onConfirm:function(){},children:e.React.createElement(I,{style:{marginVertical:12,maxHeight:e.ReactNative.Dimensions.get("window").height*.7}},e.React.createElement(b,{rowGenerator:new E,message:new A({id:"0",channel_id:S.getChannelId(),author:m.getCurrentUser(),content:n.current})}))})};return e.React.createElement(v,{style:{flexDirection:"row",position:"absolute",left:0,top:-c,zIndex:3},duration:100,fade:n.current?.length>0?"in":"out"},e.React.createElement(N,{android_ripple:f.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityState:{disabled:!1,expanded:!1},accessibilityLabel:"Open markdown preview",accessibilityHint:"Open a modal which shows your message's markdown preview",onPress:o,style:f.actionButton,children:e.React.createElement(e.ReactNative.Image,{style:f.actionIcon,source:w.getAssetIDByName("ic_eye")})}))}const{ChatInput:T}=i.findByProps("ChatInput");let h=[];function x(){return h.push(p.after("render",T.prototype,function(a,r){const n=y.findInReactTree(r,function(t){return typeof t?.placeholder=="string"});if(!n?.onChangeText)return;const o=y.findInReactTree(r,function(t){return t?.type?.displayName==="View"&&Array.isArray(t?.props?.children)})?.props?.children;o&&o.unshift(React.createElement(D,{inputProps:n}))})),function(){h.forEach(function(a){return a()}),h=[]}}let R;var B={onLoad:function(){return R=x()},onUnload:function(){return R?.()}};return l.default=B,Object.defineProperty(l,"__esModule",{value:!0}),l})({},vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.metro.common,vendetta.ui.alerts,vendetta.ui.assets,vendetta.ui.components,vendetta.ui);
