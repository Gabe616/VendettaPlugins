(function(m,u,d,k,x,S,M,P,T,$){"use strict";const{TextStyleSheet:O}=u.findByProps("TextStyleSheet"),{View:p,Text:C}=M.General,{FormRow:q}=M.Forms;function w(o){const t=u.findByProps("colors","meta"),n=u.findByStoreName("ThemeStore");return t.meta.resolveSemanticColor(n.theme,o)}function D(o){let{title:t,icon:n,children:s,padding:e}=o;const r=d.stylesheet.createThemedStyleSheet({mainText:{fontFamily:d.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:w(T.semanticColors.HEADER_SECONDARY)},main:{backgroundColor:w(T.semanticColors.BACKGROUND_TERTIARY),borderRadius:16,overflow:"hidden",flex:1}});return React.createElement(p,{style:{marginHorizontal:16,marginTop:16}},React.createElement(p,{style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},n&&React.createElement(p,{style:{marginRight:4}},React.createElement(q.Icon,{source:n,size:"small"})),React.createElement(C,{style:r.mainText},t)),React.createElement(p,{style:r.main},e?React.createElement(p,{style:{paddingHorizontal:16,paddingVertical:16}},s):s))}var N;(function(o){function t(n){let{children:s}=n;return React.createElement(C,{style:O["text-md/bold"]},s)}o.Bold=t})(N||(N={}));const a=k.storage,{ScrollView:G,Text:g}=M.General,{FormSwitchRow:A,FormIcon:F}=M.Forms;function Y(o){let{style:t}=o;const[n,s]=React.useState(!1),e=new Date;e.setSeconds(e.getSeconds()+1,0),setTimeout(function(){return s(!n)},e.getTime()-Date.now());const r=new Date,y=[[4],[19,20],[4,18,2],r.getHours()<12&&[r.getHours()],[r.getHours(),r.getMinutes()],[r.getHours(),r.getMinutes(),r.getSeconds()]].filter(function(E){return!!E}),f=[];let v=-1;for(const[E,R,i]of y){v++;const l=new Date;l.setHours(E,R??0,i||0);let c=[l.getHours().toString(),R!==void 0&&l.getMinutes().toString().padStart(2,"0"),i!==void 0&&l.getSeconds().toString().padStart(2,"0")].filter(function(B){return!!B}).join(":");E<12&&(c+=" AM");const h=I(Math.floor(l.getTime()/1e3).toString(),a.alwaysLong?"T":"t");f.push(a.reqBackticks?React.createElement(g,{style:t.code},c):c),f.push(" \u2014 "),f.push(React.createElement(g,{style:t.timestamp,onPress:function(){return $.showToast(h.full,S.getAssetIDByName("ic_information_24px"))}},h.formatted)),v!==y.length-1&&f.push(`
`)}return React.createElement(React.Fragment,null,...f)}function z(){a.reqBackticks??=!0,a.alwaysLong??=!1,x.useProxy(a);const o=L.theme,t=b.meta.resolveSemanticColor(o,T.semanticColors.TEXT_NORMAL),n=b.meta.resolveSemanticColor(o,T.semanticColors.SPOILER_HIDDEN_BACKGROUND),s=b.meta.resolveSemanticColor(o,T.semanticColors.BACKGROUND_MODIFIER_ACCENT),e=d.stylesheet.createThemedStyleSheet({mainText:{fontFamily:d.constants.Fonts.DISPLAY_NORMAL,includeFontPadding:!1,fontSize:16,color:t},boldText:{fontFamily:d.constants.Fonts.DISPLAY_BOLD,includeFontPadding:!1,color:t},code:{fontFamily:d.constants.Fonts.CODE_SEMIBOLD,includeFontPadding:!1,color:t,backgroundColor:n},timestamp:{fontFamily:d.constants.Fonts.DISPLAY_NORMAL,includeFontPadding:!1,color:t,backgroundColor:s}});return React.createElement(G,null,React.createElement(D,{title:"Info",icon:S.getAssetIDByName("ic_info_24px"),padding:!0},React.createElement(g,{style:e.mainText},"Send a message with a time code (in",React.createElement(g,{style:e.boldText}," HH:MM")," or",React.createElement(g,{style:e.boldText}," HH:MM:SS")," format) and automatically turn it into a timestamp",`

`,React.createElement(Y,{style:e}))),React.createElement(D,{title:"Settings",icon:S.getAssetIDByName("settings")},React.createElement(A,{label:"Require Backticks",subLabel:"Require time to be surrounded by backticks",leading:React.createElement(F,{source:S.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return a.reqBackticks=!a.reqBackticks},value:a.reqBackticks}),React.createElement(A,{label:"Always Long Time",subLabel:["Always display ",React.createElement(g,{style:e.boldText},"HH:MM:SS")," instead of ",React.createElement(g,{style:e.boldText},"HH:MM")],leading:React.createElement(F,{source:S.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return a.alwaysLong=!a.alwaysLong},value:a.alwaysLong})))}const L=u.findByStoreName("ThemeStore"),b=u.findByProps("colors","meta"),_=u.findByProps("sendMessage","receiveMessage"),{parseTimestamp:I}=u.findByProps("parseTimestamp","unparseTimestamp");let H;var V={onLoad:function(){H=P.before("sendMessage",_,function(o){const t=o[1];let n=t?.content;if(typeof n!="string"||typeof t!="object")return;const s=a.reqBackticks?"`":"",e={otN:"[0-9]{1,2}",tN:"[0-9]{2}",abrv:"( ?(AM|PM))"},r=[`(${e.otN}:${e.tN}:${e.tN})${e.abrv}?`,`(${e.otN}:${e.tN})${e.abrv}?`,`(${e.otN})${e.abrv}`].map(function(y){return new RegExp(`${s}${y}${s}`,"gi")});for(const y of r)n=n.replace(y,function(f,v,E,R){let[i,l,c]=v.split(":").map(function(B){return parseInt(B)});if(i<0||i>24||typeof l=="number"&&(l<0||l>60)||typeof c=="number"&&(c<0||c>60))return f;R&&(R.toLowerCase()==="pm"&&i!==12?i+=12:R.toLowerCase()==="am"&&i===12&&(i=0));const h=new Date;return h.setHours(i,l??0,c??0,0),`<t:${Math.floor(h.getTime()/1e3)}:${a.alwaysLong?"T":"t"}>`});t.content=n})},onUnload:function(){return H?.()},settings:z};return m.Colors=b,m.MessageSender=_,m.ThemeStore=L,m.default=V,m.parseTimestamp=I,Object.defineProperty(m,"__esModule",{value:!0}),m})({},vendetta.metro,vendetta.metro.common,vendetta.plugin,vendetta.storage,vendetta.ui.assets,vendetta.ui.components,vendetta.patcher,vendetta.ui,vendetta.ui.toasts);
