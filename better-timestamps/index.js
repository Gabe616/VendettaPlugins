(function(u,g,e,k,R,v,x,P,T,$){"use strict";const{TextStyleSheet:O}=g.findByProps("TextStyleSheet"),{View:E,Text:w}=v.General,{FormRow:q}=v.Forms;function C(o){const n=g.findByProps("colors","meta"),a=g.findByStoreName("ThemeStore");return n.meta.resolveSemanticColor(a.theme,o)}function D(o){let{title:n,icon:a,children:i,padding:t}=o;const s=e.stylesheet.createThemedStyleSheet({mainText:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:C(T.semanticColors.HEADER_SECONDARY)},main:{backgroundColor:C(T.semanticColors.BACKGROUND_TERTIARY),borderRadius:16,overflow:"hidden",flex:1}});return React.createElement(E,{style:{marginHorizontal:16,marginTop:16}},React.createElement(E,{style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},a&&React.createElement(E,{style:{marginRight:4}},React.createElement(q.Icon,{source:a,size:"small"})),React.createElement(w,{style:s.mainText},n)),React.createElement(E,{style:s.main},t?React.createElement(E,{style:{paddingHorizontal:16,paddingVertical:16}},i):i))}var A;(function(o){function n(a){let{children:i}=a;return React.createElement(w,{style:O["text-md/bold"]},i)}o.Bold=n})(A||(A={}));const{ScrollView:G,Text:m}=v.General,{FormSwitchRow:N,FormIcon:F}=v.Forms;function Y(o){let{style:n}=o;const[a,i]=e.React.useState(!1),t=new Date;t.setSeconds(t.getSeconds()+1,0),setTimeout(function(){return i(!a)},t.getTime()-Date.now());const s=new Date,y=[[4],[19,20],[4,18,2],s.getHours()<12&&[s.getHours()],[s.getHours(),s.getMinutes()],[s.getHours(),s.getMinutes(),s.getSeconds()]].filter(function(p){return!!p}),f=[];let b=-1;for(const[p,S,l]of y){b++;const c=new Date;c.setHours(p,S??0,l||0);let d=[c.getHours().toString(),S!==void 0&&c.getMinutes().toString().padStart(2,"0"),l!==void 0&&c.getSeconds().toString().padStart(2,"0")].filter(function(B){return!!B}).join(":");p<12&&(d+=" AM");const h=I(Math.floor(c.getTime()/1e3).toString(),r.alwaysLong?"T":"t");f.push(r.reqBackticks?e.React.createElement(m,{style:n.code},d):d),f.push(" \u2014 "),f.push(e.React.createElement(m,{style:n.timestamp,onPress:function(){return $.showToast(h.full,R.getAssetIDByName("ic_information_24px"))}},h.formatted)),b!==y.length-1&&f.push(`
`)}return e.React.createElement(e.React.Fragment,null,...f)}function z(){r.reqBackticks??=!0,r.alwaysLong??=!1,k.useProxy(r);const o=L.theme,n=M.meta.resolveSemanticColor(o,T.semanticColors.TEXT_NORMAL),a=M.meta.resolveSemanticColor(o,T.semanticColors.SPOILER_HIDDEN_BACKGROUND),i=M.meta.resolveSemanticColor(o,T.semanticColors.BACKGROUND_MODIFIER_ACCENT),t=e.stylesheet.createThemedStyleSheet({mainText:{fontFamily:e.constants.Fonts.DISPLAY_NORMAL,includeFontPadding:!1,fontSize:16,color:n},boldText:{fontFamily:e.constants.Fonts.DISPLAY_BOLD,includeFontPadding:!1,color:n},code:{fontFamily:e.constants.Fonts.CODE_SEMIBOLD,includeFontPadding:!1,color:n,backgroundColor:a},timestamp:{fontFamily:e.constants.Fonts.DISPLAY_NORMAL,includeFontPadding:!1,color:n,backgroundColor:i}});return e.React.createElement(G,null,e.React.createElement(D,{title:"Info",icon:R.getAssetIDByName("ic_info_24px"),padding:!0},e.React.createElement(m,{style:t.mainText},"Send a message with a time code (in",e.React.createElement(m,{style:t.boldText}," HH:MM")," or",e.React.createElement(m,{style:t.boldText}," HH:MM:SS")," format) and automatically turn it into a timestamp",`

`,e.React.createElement(Y,{style:t}))),e.React.createElement(D,{title:"Settings",icon:R.getAssetIDByName("settings")},e.React.createElement(N,{label:"Require Backticks",subLabel:"Require time to be surrounded by backticks",leading:e.React.createElement(F,{source:R.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return r.reqBackticks=!r.reqBackticks},value:r.reqBackticks}),e.React.createElement(N,{label:"Always Long Time",subLabel:["Always display ",e.React.createElement(m,{style:t.boldText},"HH:MM:SS")," instead of ",e.React.createElement(m,{style:t.boldText},"HH:MM")],leading:e.React.createElement(F,{source:R.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return r.alwaysLong=!r.alwaysLong},value:r.alwaysLong})))}const L=g.findByStoreName("ThemeStore"),M=g.findByProps("colors","meta"),_=g.findByProps("sendMessage","receiveMessage"),{parseTimestamp:I}=g.findByProps("parseTimestamp","unparseTimestamp"),r=P.storage;let H;var V={onLoad:function(){H=x.before("sendMessage",_,function(o){const n=o[1];let a=n?.content;if(typeof a!="string"||typeof n!="object")return;const i=r.reqBackticks?"`":"",t={otN:"[0-9]{1,2}",tN:"[0-9]{2}",abrv:"( ?(AM|PM))"},s=[`(${t.otN}:${t.tN}:${t.tN})${t.abrv}?`,`(${t.otN}:${t.tN})${t.abrv}?`,`(${t.otN})${t.abrv}`].map(function(y){return new RegExp(`${i}${y}${i}`,"gi")});for(const y of s)a=a.replace(y,function(f,b,p,S){let[l,c,d]=b.split(":").map(function(B){return parseInt(B)});if(l<0||l>24||typeof c=="number"&&(c<0||c>60)||typeof d=="number"&&(d<0||d>60))return f;S&&(S.toLowerCase()==="pm"&&l!==12?l+=12:S.toLowerCase()==="am"&&l===12&&(l=0));const h=new Date;return h.setHours(l,c??0,d??0,0),`<t:${Math.floor(h.getTime()/1e3)}:${r.alwaysLong?"T":"t"}>`});n.content=a})},onUnload:function(){return H?.()},settings:z};return u.Colors=M,u.MessageSender=_,u.ThemeStore=L,u.default=V,u.parseTimestamp=I,u.vstorage=r,Object.defineProperty(u,"__esModule",{value:!0}),u})({},vendetta.metro,vendetta.metro.common,vendetta.storage,vendetta.ui.assets,vendetta.ui.components,vendetta.patcher,vendetta.plugin,vendetta.ui,vendetta.ui.toasts);
