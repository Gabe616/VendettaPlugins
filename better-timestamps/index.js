(function(m,f,u,I,H,S,M,k,p,P){"use strict";const{View:T,Text:x}=M.General,{FormRow:$}=M.Forms;function w(r){const t=f.findByProps("colors","meta"),a=f.findByStoreName("ThemeStore");return t.meta.resolveSemanticColor(a.theme,r)}function B(r){let{title:t,icon:a,children:i,padding:e}=r;const o=u.stylesheet.createThemedStyleSheet({mainText:{fontFamily:u.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:w(p.semanticColors.HEADER_SECONDARY)},main:{backgroundColor:w(p.semanticColors.BACKGROUND_TERTIARY),borderRadius:16,overflow:"hidden",flex:1}});return React.createElement(T,{style:{marginHorizontal:16,marginTop:16}},React.createElement(T,{style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},a&&React.createElement(T,{style:{marginRight:4}},React.createElement($.Icon,{source:a,size:"small"})),React.createElement(x,{style:o.mainText},t)),React.createElement(T,{style:o.main},e?React.createElement(T,{style:{paddingHorizontal:16,paddingVertical:16}},i):i))}const n=I.storage,{ScrollView:O,Text:d}=M.General,{FormSwitchRow:D,FormIcon:N}=M.Forms;function q(r){let{style:t}=r;const[a,i]=React.useState(!1),e=new Date;e.setSeconds(e.getSeconds()+1,0),setTimeout(function(){return i(!a)},e.getTime()-Date.now());const o=new Date,y=[[4],[19,20],[4,18,2],o.getHours()<12&&[o.getHours()],[o.getHours(),o.getMinutes()],[o.getHours(),o.getMinutes(),o.getSeconds()]].filter(function(E){return!!E}),g=[];let v=-1;for(const[E,R,s]of y){v++;const c=new Date;c.setHours(E,R??0,s||0);let l=[c.getHours().toString(),R!==void 0&&c.getMinutes().toString().padStart(2,"0"),s!==void 0&&c.getSeconds().toString().padStart(2,"0")].filter(function(C){return!!C}).join(":");E<12&&(l+=" AM");const h=L(Math.floor(c.getTime()/1e3).toString(),n.alwaysLong?"T":"t");g.push(n.reqBackticks?React.createElement(d,{style:t.code},l):l),g.push(" \u2014 "),g.push(React.createElement(d,{style:t.timestamp,onPress:function(){return P.showToast(h.full,S.getAssetIDByName("ic_information_24px"))}},h.formatted)),v!==y.length-1&&g.push(`
`)}return React.createElement(React.Fragment,null,...g)}function G(){n.reqBackticks??=!0,n.alwaysLong??=!1,H.useProxy(n);const r=A.theme,t=b.meta.resolveSemanticColor(r,p.semanticColors.TEXT_NORMAL),a=b.meta.resolveSemanticColor(r,p.semanticColors.SPOILER_HIDDEN_BACKGROUND),i=b.meta.resolveSemanticColor(r,p.semanticColors.BACKGROUND_MODIFIER_ACCENT),e=u.stylesheet.createThemedStyleSheet({mainText:{fontFamily:u.constants.Fonts.DISPLAY_NORMAL,includeFontPadding:!1,fontSize:16,color:t},boldText:{fontFamily:u.constants.Fonts.DISPLAY_BOLD,includeFontPadding:!1,color:t},code:{fontFamily:u.constants.Fonts.CODE_SEMIBOLD,includeFontPadding:!1,color:t,backgroundColor:a},timestamp:{fontFamily:u.constants.Fonts.DISPLAY_NORMAL,includeFontPadding:!1,color:t,backgroundColor:i}});return React.createElement(O,null,React.createElement(B,{title:"Info",icon:S.getAssetIDByName("ic_info_24px"),padding:!0},React.createElement(d,{style:e.mainText},"Send a message with a time code (in",React.createElement(d,{style:e.boldText}," HH:MM")," or",React.createElement(d,{style:e.boldText}," HH:MM:SS")," format) and automatically turn it into a timestamp",`

`,React.createElement(q,{style:e}))),React.createElement(B,{title:"Settings",icon:S.getAssetIDByName("settings")},React.createElement(D,{label:"Require Backticks",subLabel:"Require time to be surrounded by backticks",leading:React.createElement(N,{source:S.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return n.reqBackticks=!n.reqBackticks},value:n.reqBackticks}),React.createElement(D,{label:"Always Long Time",subLabel:["Always display ",React.createElement(d,{style:e.boldText},"HH:MM:SS")," instead of ",React.createElement(d,{style:e.boldText},"HH:MM")],leading:React.createElement(N,{source:S.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return n.alwaysLong=!n.alwaysLong},value:n.alwaysLong})))}const A=f.findByStoreName("ThemeStore"),b=f.findByProps("colors","meta"),F=f.findByProps("sendMessage","receiveMessage"),{parseTimestamp:L}=f.findByProps("parseTimestamp","unparseTimestamp");let _;var Y={onLoad:function(){_=k.before("sendMessage",F,function(r){const t=r[1];let a=t?.content;if(typeof a!="string"||typeof t!="object")return;const i=n.reqBackticks?"`":"",e={otN:"[0-9]{1,2}",tN:"[0-9]{2}",abrv:"( ?(AM|PM))"},o=[`(${e.otN}:${e.tN}:${e.tN})${e.abrv}?`,`(${e.otN}:${e.tN})${e.abrv}?`,`(${e.otN})${e.abrv}`].map(function(y){return new RegExp(`${i}${y}${i}`,"gi")});for(const y of o)a=a.replace(y,function(g,v,E,R){let[s,c,l]=v.split(":").map(function(C){return parseInt(C)});if(s<0||s>24||typeof c=="number"&&(c<0||c>60)||typeof l=="number"&&(l<0||l>60))return g;R&&(R.toLowerCase()==="pm"&&s!==12?s+=12:R.toLowerCase()==="am"&&s===12&&(s=0));const h=new Date;return h.setHours(s,c??0,l??0,0),`<t:${Math.floor(h.getTime()/1e3)}:${n.alwaysLong?"T":"t"}>`});t.content=a})},onUnload:function(){return _?.()},settings:G};return m.Colors=b,m.MessageSender=F,m.ThemeStore=A,m.default=Y,m.parseTimestamp=L,Object.defineProperty(m,"__esModule",{value:!0}),m})({},vendetta.metro,vendetta.metro.common,vendetta.plugin,vendetta.storage,vendetta.ui.assets,vendetta.ui.components,vendetta.patcher,vendetta.ui,vendetta.ui.toasts);
