(function(b,R,e,_,T,M,x,F,u,k){"use strict";const{TextStyleSheet:H}=R.findByProps("TextStyleSheet"),{View:S,Text:w,Pressable:z}=M.General,{FormRow:I}=M.Forms;function A(t){const o=R.findByProps("colors","meta"),r=R.findByStoreName("ThemeStore");return o.meta.resolveSemanticColor(r.theme,t)}function N(t){let{title:o,icon:r,children:c,padding:n}=t;const s=e.stylesheet.createThemedStyleSheet({mainText:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:A(u.semanticColors.HEADER_SECONDARY)},main:{backgroundColor:A(u.semanticColors.BACKGROUND_TERTIARY),borderRadius:16,overflow:"hidden",flex:1}});return React.createElement(S,{style:{marginHorizontal:16,marginTop:16}},React.createElement(S,{style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},r&&React.createElement(S,{style:{marginRight:4}},React.createElement(I.Icon,{source:r,size:"small"})),React.createElement(w,{style:s.mainText},o)),React.createElement(S,{style:s.main},n?React.createElement(S,{style:{paddingHorizontal:16,paddingVertical:16}},c):c))}var B;(function(t){function o(r){let{children:c}=r;return React.createElement(w,{style:H["text-md/bold"]},c)}t.Bold=o})(B||(B={}));const{ScrollView:P,Text:g}=M.General,{FormSwitchRow:C,FormIcon:D}=M.Forms,{parseTimestamp:O}=R.findByProps("parseTimestamp","unparseTimestamp");function $(t){let{style:o}=t;const[r,c]=e.React.useState(!1),n=new Date;n.setSeconds(n.getSeconds()+1,0),setTimeout(function(){return c(!r)},n.getTime()-Date.now());const s=new Date,m=[[4],[19,20],[4,18,2],s.getHours()<12&&[s.getHours()],[s.getHours(),s.getMinutes()],[s.getHours(),s.getMinutes(),s.getSeconds()]].filter(function(p){return!!p}),f=[];let h=-1;for(const[p,y,l]of m){h++;const i=new Date;i.setHours(p,y??0,l||0);let d=[i.getHours().toString(),y!==void 0&&i.getMinutes().toString().padStart(2,"0"),l!==void 0&&i.getSeconds().toString().padStart(2,"0")].filter(function(v){return!!v}).join(":");p<12&&(d+=" AM");const E=O(Math.floor(i.getTime()/1e3).toString(),a.alwaysLong?"T":"t");f.push(a.reqBackticks?e.React.createElement(g,{style:o.code},d):d),f.push(" \u2014 "),f.push(e.React.createElement(g,{style:o.timestamp,onPress:function(){return k.showToast(E.full,T.getAssetIDByName("ic_information_24px"))}},E.formatted)),h!==m.length-1&&f.push(`
`)}return e.React.createElement(e.React.Fragment,null,...f)}function q(){a.reqBackticks??=!0,a.alwaysLong??=!1,_.useProxy(a);const t=e.stylesheet.createThemedStyleSheet({mainText:{fontFamily:e.constants.Fonts.DISPLAY_NORMAL,includeFontPadding:!1,fontSize:16,color:u.semanticColors.TEXT_NORMAL},boldText:{fontFamily:e.constants.Fonts.DISPLAY_BOLD,includeFontPadding:!1,color:u.semanticColors.TEXT_NORMAL},code:{fontFamily:e.constants.Fonts.CODE_SEMIBOLD,includeFontPadding:!1,color:u.semanticColors.TEXT_NORMAL,backgroundColor:u.semanticColors.BACKGROUND_SECONDARY},timestamp:{fontFamily:e.constants.Fonts.DISPLAY_NORMAL,includeFontPadding:!1,color:u.semanticColors.TEXT_NORMAL,backgroundColor:u.semanticColors.BACKGROUND_MODIFIER_ACCENT}});return e.React.createElement(P,null,e.React.createElement(N,{title:"Info",icon:T.getAssetIDByName("ic_info_24px"),padding:!0},e.React.createElement(g,{style:t.mainText},"Send a message with a time code (in",e.React.createElement(g,{style:t.boldText}," HH:MM")," or",e.React.createElement(g,{style:t.boldText}," HH:MM:SS")," format) and automatically turn it into a timestamp",`

`,e.React.createElement($,{style:t}))),e.React.createElement(N,{title:"Settings",icon:T.getAssetIDByName("settings")},e.React.createElement(C,{label:"Require Backticks",subLabel:"Require time to be surrounded by backticks",leading:e.React.createElement(D,{source:T.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return a.reqBackticks=!a.reqBackticks},value:a.reqBackticks}),e.React.createElement(C,{label:"Always Long Time",subLabel:["Always display ",e.React.createElement(g,{style:t.boldText},"HH:MM:SS")," instead of ",e.React.createElement(g,{style:t.boldText},"HH:MM")],leading:e.React.createElement(D,{source:T.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return a.alwaysLong=!a.alwaysLong},value:a.alwaysLong})))}const Y=R.findByProps("sendMessage","receiveMessage"),a=F.storage;let L;var G={onLoad:function(){L=x.before("sendMessage",Y,function(t){const o=t[1];let r=o?.content;if(typeof r!="string"||typeof o!="object")return;const c=a.reqBackticks?"`":"",n={otN:"[0-9]{1,2}",tN:"[0-9]{2}",abrv:"( ?(AM|PM))"},s=[`(${n.otN}:${n.tN}:${n.tN})${n.abrv}?`,`(${n.otN}:${n.tN})${n.abrv}?`,`(${n.otN})${n.abrv}`].map(function(m){return new RegExp(`${c}${m}${c}`,"gi")});for(const m of s)r=r.replace(m,function(f,h,p,y){let[l,i,d]=h.split(":").map(function(v){return parseInt(v)});if(l<0||l>24||typeof i=="number"&&(i<0||i>60)||typeof d=="number"&&(d<0||d>60))return f;y&&(y.toLowerCase()==="pm"&&l!==12?l+=12:y.toLowerCase()==="am"&&l===12&&(l=0));const E=new Date;return E.setHours(l,i??0,d??0,0),`<t:${Math.floor(E.getTime()/1e3)}:${a.alwaysLong?"T":"t"}>`});o.content=r})},onUnload:function(){return L?.()},settings:q};return b.default=G,b.vstorage=a,Object.defineProperty(b,"__esModule",{value:!0}),b})({},vendetta.metro,vendetta.metro.common,vendetta.storage,vendetta.ui.assets,vendetta.ui.components,vendetta.patcher,vendetta.plugin,vendetta.ui,vendetta.ui.toasts);
