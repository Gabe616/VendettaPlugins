(function(m,h,e,_,p,M,B,x,u,F){"use strict";const{TextStyleSheet:k}=h.findByProps("TextStyleSheet"),{View:E,Text:A}=M.General,{FormRow:H}=M.Forms;function D(n){let{title:s,icon:l,children:c,padding:a}=n;const r=e.stylesheet.createThemedStyleSheet({mainText:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:u.semanticColors.HEADER_SECONDARY},main:{backgroundColor:u.semanticColors.BACKGROUND_TERTIARY,borderRadius:16,overflow:"hidden",flex:1}});return e.React.createElement(E,{style:{marginHorizontal:16,marginTop:16}},e.React.createElement(E,{style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},l&&e.React.createElement(E,{style:{marginRight:4}},e.React.createElement(H.Icon,{source:l,size:"small"})),e.React.createElement(A,{style:r.mainText},s)),e.React.createElement(E,{style:r.main},a?e.React.createElement(E,{style:{paddingHorizontal:16,paddingVertical:16}},c):c))}var N;(function(n){function s(l){let{children:c}=l;return e.React.createElement(A,{style:k["text-md/bold"]},c)}n.Bold=s})(N||(N={}));const{ScrollView:I,Text:g}=M.General,{FormSwitchRow:v,FormIcon:C}=M.Forms,{parseTimestamp:O}=h.findByProps("parseTimestamp","unparseTimestamp");function P(n){let{style:s}=n;const[l,c]=e.React.useReducer(function(y){return~y},0),a=new Date().setMilliseconds(1e3);setTimeout(function(){return c()},a-Date.now());const r=new Date,R=[[4],[19,20],[4,18,2],r.getHours()<12&&[r.getHours()],[r.getHours(),r.getMinutes()],[r.getHours(),r.getMinutes(),r.getSeconds()]].filter(function(y){return!!y}),f=[];let b=-1;for(const[y,T,i]of R){b++;const o=new Date;o.setHours(y,T??0,i||0);let d=[o.getHours().toString(),T!==void 0&&o.getMinutes().toString().padStart(2,"0"),i!==void 0&&o.getSeconds().toString().padStart(2,"0")].filter(function(w){return!!w}).join(":");y<12&&(d+=" AM");const S=O(Math.floor(o.getTime()/1e3).toString(),t.alwaysLong?"T":"t");f.push(t.reqBackticks?e.React.createElement(g,{style:s.code},d):d),f.push(" \u2014 "),f.push(e.React.createElement(g,{style:s.timestamp,onPress:function(){return F.showToast(S.full,p.getAssetIDByName("ic_information_24px"))}},S.formatted)),b!==R.length-1&&f.push(`
`)}return e.React.createElement(e.React.Fragment,null,...f)}function $(){t.reqBackticks??=!0,t.alwaysLong??=!1,_.useProxy(t);const n=e.stylesheet.createThemedStyleSheet({mainText:{fontFamily:e.constants.Fonts.DISPLAY_NORMAL,includeFontPadding:!1,fontSize:16,color:u.semanticColors.TEXT_NORMAL},boldText:{fontFamily:e.constants.Fonts.DISPLAY_BOLD,includeFontPadding:!1,color:u.semanticColors.TEXT_NORMAL},code:{fontFamily:e.constants.Fonts.CODE_SEMIBOLD,includeFontPadding:!1,color:u.semanticColors.TEXT_NORMAL,backgroundColor:u.semanticColors.BACKGROUND_SECONDARY},timestamp:{fontFamily:e.constants.Fonts.DISPLAY_NORMAL,includeFontPadding:!1,color:u.semanticColors.TEXT_NORMAL,backgroundColor:u.semanticColors.BACKGROUND_MODIFIER_ACCENT}});return e.React.createElement(I,null,e.React.createElement(D,{title:"Info",icon:p.getAssetIDByName("ic_info_24px"),padding:!0},e.React.createElement(g,{style:n.mainText},"Send a message with a time code (in",e.React.createElement(g,{style:n.boldText}," HH:MM")," or",e.React.createElement(g,{style:n.boldText}," HH:MM:SS")," format) and automatically turn it into a timestamp",`

`,e.React.createElement(P,{style:n}))),e.React.createElement(D,{title:"Settings",icon:p.getAssetIDByName("settings")},e.React.createElement(v,{label:"Require Backticks",subLabel:"Require time to be surrounded by backticks",leading:e.React.createElement(C,{source:p.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return t.reqBackticks=!t.reqBackticks},value:t.reqBackticks}),e.React.createElement(v,{label:"Always Long Time",subLabel:["Always display ",e.React.createElement(g,{style:n.boldText},"HH:MM:SS")," instead of ",e.React.createElement(g,{style:n.boldText},"HH:MM")],leading:e.React.createElement(C,{source:p.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return t.alwaysLong=!t.alwaysLong},value:t.alwaysLong})))}const q=h.findByProps("sendMessage","receiveMessage"),t=x.storage;let L;var Y={onLoad:function(){L=B.before("sendMessage",q,function(n){const s=n[1];let l=s?.content;if(typeof l!="string"||typeof s!="object")return;const c=t.reqBackticks?"`":"",a={otN:"[0-9]{1,2}",tN:"[0-9]{2}",abrv:"( ?(AM|PM))"},r=[`(${a.otN}:${a.tN}:${a.tN})${a.abrv}?`,`(${a.otN}:${a.tN})${a.abrv}?`,`(${a.otN})${a.abrv}`].map(function(R){return new RegExp(`${c}${R}${c}`,"gi")});for(const R of r)l=l.replace(R,function(f,b,y,T){let[i,o,d]=b.split(":").map(function(w){return parseInt(w)});if(i<0||i>24||typeof o=="number"&&(o<0||o>60)||typeof d=="number"&&(d<0||d>60))return f;T&&(T.toLowerCase()==="pm"&&i!==12?i+=12:T.toLowerCase()==="am"&&i===12&&(i=0));const S=new Date;return S.setHours(i,o??0,d??0,0),`<t:${Math.floor(S.getTime()/1e3)}:${t.alwaysLong?"T":"t"}>`});s.content=l})},onUnload:function(){return L?.()},settings:$};return m.default=Y,m.vstorage=t,Object.defineProperty(m,"__esModule",{value:!0}),m})({},vendetta.metro,vendetta.metro.common,vendetta.storage,vendetta.ui.assets,vendetta.ui.components,vendetta.patcher,vendetta.plugin,vendetta.ui,vendetta.ui.toasts);
