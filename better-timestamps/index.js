(function(d,g,e,k,x,R,b,P,T,O){"use strict";const{TextStyleSheet:$}=g.findByProps("TextStyleSheet"),{View:p,Text:w}=b.General,{FormRow:q}=b.Forms;function C(o){const n=g.findByProps("colors","meta"),a=g.findByStoreName("ThemeStore");return n.meta.resolveSemanticColor(a.theme,o)}function D(o){let{title:n,icon:a,children:l,padding:t}=o;const s=e.stylesheet.createThemedStyleSheet({mainText:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:C(T.semanticColors.HEADER_SECONDARY)},main:{backgroundColor:C(T.semanticColors.BACKGROUND_TERTIARY),borderRadius:16,overflow:"hidden",flex:1}});return React.createElement(p,{style:{marginHorizontal:16,marginTop:16}},React.createElement(p,{style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},a&&React.createElement(p,{style:{marginRight:4}},React.createElement(q.Icon,{source:a,size:"small"})),React.createElement(w,{style:s.mainText},n)),React.createElement(p,{style:s.main},t?React.createElement(p,{style:{paddingHorizontal:16,paddingVertical:16}},l):l))}var A;(function(o){function n(a){let{children:l}=a;return React.createElement(w,{style:$["text-md/bold"]},l)}o.Bold=n})(A||(A={}));const r=k.storage,{ScrollView:G,Text:m}=b.General,{FormSwitchRow:N,FormIcon:F}=b.Forms;function Y(o){let{style:n}=o;const[a,l]=e.React.useState(!1),t=new Date;t.setSeconds(t.getSeconds()+1,0),setTimeout(function(){return l(!a)},t.getTime()-Date.now());const s=new Date,y=[[4],[19,20],[4,18,2],s.getHours()<12&&[s.getHours()],[s.getHours(),s.getMinutes()],[s.getHours(),s.getMinutes(),s.getSeconds()]].filter(function(E){return!!E}),f=[];let M=-1;for(const[E,S,i]of y){M++;const c=new Date;c.setHours(E,S??0,i||0);let u=[c.getHours().toString(),S!==void 0&&c.getMinutes().toString().padStart(2,"0"),i!==void 0&&c.getSeconds().toString().padStart(2,"0")].filter(function(B){return!!B}).join(":");E<12&&(u+=" AM");const h=I(Math.floor(c.getTime()/1e3).toString(),r.alwaysLong?"T":"t");f.push(r.reqBackticks?e.React.createElement(m,{style:n.code},u):u),f.push(" \u2014 "),f.push(e.React.createElement(m,{style:n.timestamp,onPress:function(){return O.showToast(h.full,R.getAssetIDByName("ic_information_24px"))}},h.formatted)),M!==y.length-1&&f.push(`
`)}return e.React.createElement(e.React.Fragment,null,...f)}function z(){r.reqBackticks??=!0,r.alwaysLong??=!1,x.useProxy(r);const o=L.theme,n=v.meta.resolveSemanticColor(o,T.semanticColors.TEXT_NORMAL),a=v.meta.resolveSemanticColor(o,T.semanticColors.SPOILER_HIDDEN_BACKGROUND),l=v.meta.resolveSemanticColor(o,T.semanticColors.BACKGROUND_MODIFIER_ACCENT),t=e.stylesheet.createThemedStyleSheet({mainText:{fontFamily:e.constants.Fonts.DISPLAY_NORMAL,includeFontPadding:!1,fontSize:16,color:n},boldText:{fontFamily:e.constants.Fonts.DISPLAY_BOLD,includeFontPadding:!1,color:n},code:{fontFamily:e.constants.Fonts.CODE_SEMIBOLD,includeFontPadding:!1,color:n,backgroundColor:a},timestamp:{fontFamily:e.constants.Fonts.DISPLAY_NORMAL,includeFontPadding:!1,color:n,backgroundColor:l}});return e.React.createElement(G,null,e.React.createElement(D,{title:"Info",icon:R.getAssetIDByName("ic_info_24px"),padding:!0},e.React.createElement(m,{style:t.mainText},"Send a message with a time code (in",e.React.createElement(m,{style:t.boldText}," HH:MM")," or",e.React.createElement(m,{style:t.boldText}," HH:MM:SS")," format) and automatically turn it into a timestamp",`

`,e.React.createElement(Y,{style:t}))),e.React.createElement(D,{title:"Settings",icon:R.getAssetIDByName("settings")},e.React.createElement(N,{label:"Require Backticks",subLabel:"Require time to be surrounded by backticks",leading:e.React.createElement(F,{source:R.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return r.reqBackticks=!r.reqBackticks},value:r.reqBackticks}),e.React.createElement(N,{label:"Always Long Time",subLabel:["Always display ",e.React.createElement(m,{style:t.boldText},"HH:MM:SS")," instead of ",e.React.createElement(m,{style:t.boldText},"HH:MM")],leading:e.React.createElement(F,{source:R.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return r.alwaysLong=!r.alwaysLong},value:r.alwaysLong})))}const L=g.findByStoreName("ThemeStore"),v=g.findByProps("colors","meta"),_=g.findByProps("sendMessage","receiveMessage"),{parseTimestamp:I}=g.findByProps("parseTimestamp","unparseTimestamp");let H;var V={onLoad:function(){H=P.before("sendMessage",_,function(o){const n=o[1];let a=n?.content;if(typeof a!="string"||typeof n!="object")return;const l=r.reqBackticks?"`":"",t={otN:"[0-9]{1,2}",tN:"[0-9]{2}",abrv:"( ?(AM|PM))"},s=[`(${t.otN}:${t.tN}:${t.tN})${t.abrv}?`,`(${t.otN}:${t.tN})${t.abrv}?`,`(${t.otN})${t.abrv}`].map(function(y){return new RegExp(`${l}${y}${l}`,"gi")});for(const y of s)a=a.replace(y,function(f,M,E,S){let[i,c,u]=M.split(":").map(function(B){return parseInt(B)});if(i<0||i>24||typeof c=="number"&&(c<0||c>60)||typeof u=="number"&&(u<0||u>60))return f;S&&(S.toLowerCase()==="pm"&&i!==12?i+=12:S.toLowerCase()==="am"&&i===12&&(i=0));const h=new Date;return h.setHours(i,c??0,u??0,0),`<t:${Math.floor(h.getTime()/1e3)}:${r.alwaysLong?"T":"t"}>`});n.content=a})},onUnload:function(){return H?.()},settings:z};return d.Colors=v,d.MessageSender=_,d.ThemeStore=L,d.default=V,d.parseTimestamp=I,Object.defineProperty(d,"__esModule",{value:!0}),d})({},vendetta.metro,vendetta.metro.common,vendetta.plugin,vendetta.storage,vendetta.ui.assets,vendetta.ui.components,vendetta.patcher,vendetta.ui,vendetta.ui.toasts);
