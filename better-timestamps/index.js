(function(u,y,d,H,_,v,b,k,p,I){"use strict";const{View:E,Text:P}=b.General;function C(a){const t=y.findByProps("colors","meta"),o=y.findByStoreName("ThemeStore");return t.meta.resolveSemanticColor(o.theme,a)}function w(a){let{title:t,children:o,padding:i}=a;const e=d.stylesheet.createThemedStyleSheet({mainText:{fontFamily:d.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:C(p.semanticColors.HEADER_SECONDARY)},main:{backgroundColor:C(p.semanticColors.BACKGROUND_TERTIARY),borderRadius:16,overflow:"hidden",flex:1}});return React.createElement(E,{style:{marginHorizontal:16,marginTop:16}},React.createElement(E,{style:{marginBottom:8}},React.createElement(P,{style:e.mainText},t)),React.createElement(E,{style:e.main},i?React.createElement(E,{style:{paddingHorizontal:16,paddingVertical:16}},o):o))}const n=H.storage,{ScrollView:$,Text:g}=b.General,{FormSwitchRow:B,FormIcon:D}=b.Forms;function O(a){let{style:t}=a;const[o,i]=React.useState(!1),e=new Date;e.setSeconds(e.getSeconds()+1,0),setTimeout(function(){return i(!o)},e.getTime()-Date.now());const c=new Date,S=[[4],[19,20],[4,18,2],c.getHours()<12&&[c.getHours()],[c.getHours(),c.getMinutes()],[c.getHours(),c.getMinutes(),c.getSeconds()]].filter(function(m){return!!m}),l=[];let T=-1;for(const[m,r,f]of S){T++;const s=new Date;s.setHours(m,r??0,f||0);let R=[s.getHours().toString(),r!==void 0&&s.getMinutes().toString().padStart(2,"0"),f!==void 0&&s.getSeconds().toString().padStart(2,"0")].filter(function(G){return!!G}).join(":");m<12&&(R+=" AM");const h=A(Math.floor(s.getTime()/1e3).toString(),n.alwaysLong?"T":"t");l.push(n.reqBackticks?React.createElement(g,{style:t.code},R):R),l.push(" \u2014 "),l.push(React.createElement(g,{style:t.timestamp,onPress:function(){return I.showToast(h.full,v.getAssetIDByName("ic_information_24px"))}},h.formatted)),T!==S.length-1&&l.push(`
`)}return React.createElement(React.Fragment,null,...l)}function x(){n.reqBackticks??=!0,n.alwaysLong??=!1,_.useProxy(n);const a=L.theme,t=M.meta.resolveSemanticColor(a,p.semanticColors.TEXT_NORMAL),o=M.meta.resolveSemanticColor(a,p.semanticColors.SPOILER_HIDDEN_BACKGROUND),i=M.meta.resolveSemanticColor(a,p.semanticColors.BACKGROUND_MODIFIER_ACCENT),e=d.stylesheet.createThemedStyleSheet({mainText:{fontFamily:d.constants.Fonts.DISPLAY_NORMAL,includeFontPadding:!1,fontSize:16,color:t},boldText:{fontFamily:d.constants.Fonts.DISPLAY_BOLD,includeFontPadding:!1,color:t},code:{fontFamily:d.constants.Fonts.CODE_SEMIBOLD,includeFontPadding:!1,color:t,backgroundColor:o},timestamp:{fontFamily:d.constants.Fonts.DISPLAY_NORMAL,includeFontPadding:!1,color:t,backgroundColor:i}});return React.createElement($,null,React.createElement(w,{title:"Info",padding:!0},React.createElement(g,{style:e.mainText},"Send a message with a time code (in",React.createElement(g,{style:e.boldText},"HH:MM")," or",React.createElement(g,{style:e.boldText},"HH:MM:SS")," format) and automatically turn it into a timestamp",`

`,React.createElement(O,{style:e}))),React.createElement(w,{title:"Settings"},React.createElement(B,{label:"Require Backticks",subLabel:"Require time to be surrounded by backticks",leading:React.createElement(D,{source:v.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return n.reqBackticks=!n.reqBackticks},value:n.reqBackticks}),React.createElement(B,{label:"Always Long Time",subLabel:["Always display ",React.createElement(g,{style:e.boldText},"HH:MM:SS")," instead of ",React.createElement(g,{style:e.boldText},"HH:MM")],leading:React.createElement(D,{source:v.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return n.alwaysLong=!n.alwaysLong},value:n.alwaysLong})))}const L=y.findByStoreName("ThemeStore"),M=y.findByProps("colors","meta"),N=y.findByProps("sendMessage","receiveMessage"),{parseTimestamp:A}=y.findByProps("parseTimestamp","unparseTimestamp");let F;var q={onLoad:function(){F=k.before("sendMessage",N,function(a){const t=a[1],o=t?.content;if(typeof o!="string"||typeof t!="object")return;const i=n.reqBackticks?"`":"",e={otN:"[0-9]{1,2}",tN:"[0-9]{2}",abrv:" ?(AM|PM)"},c=[`(${e.otN})${e.abrv}`,`(${e.otN}:${e.tN})${e.abrv}`,`(${e.otN}:${e.tN}:${e.tN})${e.abrv}`].map(function(S){return new RegExp(`${i}${S}${i}`,"gi")});for(const S of c)t.content=o.replace(S,function(l,T,m){if(parseInt(T)===void 0)return l;let[r,f,s]=T.split(":").map(function(h){return parseInt(h)});if(r<0||r>24||typeof f=="number"&&(f<0||f>60)||typeof s=="number"&&(s<0||s>60))return l;m&&(m.toLowerCase()==="pm"&&r!==12?r+=12:m.toLowerCase()==="am"&&r===12&&(r=0));const R=new Date;return R.setHours(r,f??0,s??0,0),`<t:${Math.floor(R.getTime()/1e3)}:${n.alwaysLong?"T":"t"}>`})})},onUnload:function(){return F?.()},settings:x};return u.Colors=M,u.MessageSender=N,u.ThemeStore=L,u.default=q,u.parseTimestamp=A,Object.defineProperty(u,"__esModule",{value:!0}),u})({},vendetta.metro,vendetta.metro.common,vendetta.plugin,vendetta.storage,vendetta.ui.assets,vendetta.ui.components,vendetta.patcher,vendetta.ui,vendetta.ui.toasts);
