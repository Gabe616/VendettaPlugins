(function(M,T,e,_,p,h,x,F,u,k){"use strict";const{TextStyleSheet:H}=T.findByProps("TextStyleSheet"),{View:E,Text:w,Pressable:z}=h.General,{FormRow:I}=h.Forms;function A(t){const r=T.findByProps("colors","meta"),o=T.findByStoreName("ThemeStore");return r.meta.resolveSemanticColor(o.theme,t)}function N(t){let{title:r,icon:o,children:c,padding:a}=t;const s=e.stylesheet.createThemedStyleSheet({mainText:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:A(u.semanticColors.HEADER_SECONDARY)},main:{backgroundColor:A(u.semanticColors.BACKGROUND_TERTIARY),borderRadius:16,overflow:"hidden",flex:1}});return React.createElement(E,{style:{marginHorizontal:16,marginTop:16}},React.createElement(E,{style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},o&&React.createElement(E,{style:{marginRight:4}},React.createElement(I.Icon,{source:o,size:"small"})),React.createElement(w,{style:s.mainText},r)),React.createElement(E,{style:s.main},a?React.createElement(E,{style:{paddingHorizontal:16,paddingVertical:16}},c):c))}var B;(function(t){function r(o){let{children:c}=o;return React.createElement(w,{style:H["text-md/bold"]},c)}t.Bold=r})(B||(B={}));const{ScrollView:P,Text:g}=h.General,{FormSwitchRow:C,FormIcon:D}=h.Forms,{parseTimestamp:O}=T.findByProps("parseTimestamp","unparseTimestamp");function $(t){let{style:r}=t;const[o,c]=e.React.useReducer(function(y){return~y},0),a=new Date().setMilliseconds(1e3);setTimeout(function(){return c()},a-Date.now());const s=new Date,m=[[4],[19,20],[4,18,2],s.getHours()<12&&[s.getHours()],[s.getHours(),s.getMinutes()],[s.getHours(),s.getMinutes(),s.getSeconds()]].filter(function(y){return!!y}),f=[];let b=-1;for(const[y,R,l]of m){b++;const i=new Date;i.setHours(y,R??0,l||0);let d=[i.getHours().toString(),R!==void 0&&i.getMinutes().toString().padStart(2,"0"),l!==void 0&&i.getSeconds().toString().padStart(2,"0")].filter(function(v){return!!v}).join(":");y<12&&(d+=" AM");const S=O(Math.floor(i.getTime()/1e3).toString(),n.alwaysLong?"T":"t");f.push(n.reqBackticks?e.React.createElement(g,{style:r.code},d):d),f.push(" \u2014 "),f.push(e.React.createElement(g,{style:r.timestamp,onPress:function(){return k.showToast(S.full,p.getAssetIDByName("ic_information_24px"))}},S.formatted)),b!==m.length-1&&f.push(`
`)}return e.React.createElement(e.React.Fragment,null,...f)}function q(){n.reqBackticks??=!0,n.alwaysLong??=!1,_.useProxy(n);const t=e.stylesheet.createThemedStyleSheet({mainText:{fontFamily:e.constants.Fonts.DISPLAY_NORMAL,includeFontPadding:!1,fontSize:16,color:u.semanticColors.TEXT_NORMAL},boldText:{fontFamily:e.constants.Fonts.DISPLAY_BOLD,includeFontPadding:!1,color:u.semanticColors.TEXT_NORMAL},code:{fontFamily:e.constants.Fonts.CODE_SEMIBOLD,includeFontPadding:!1,color:u.semanticColors.TEXT_NORMAL,backgroundColor:u.semanticColors.BACKGROUND_SECONDARY},timestamp:{fontFamily:e.constants.Fonts.DISPLAY_NORMAL,includeFontPadding:!1,color:u.semanticColors.TEXT_NORMAL,backgroundColor:u.semanticColors.BACKGROUND_MODIFIER_ACCENT}});return e.React.createElement(P,null,e.React.createElement(N,{title:"Info",icon:p.getAssetIDByName("ic_info_24px"),padding:!0},e.React.createElement(g,{style:t.mainText},"Send a message with a time code (in",e.React.createElement(g,{style:t.boldText}," HH:MM")," or",e.React.createElement(g,{style:t.boldText}," HH:MM:SS")," format) and automatically turn it into a timestamp",`

`,e.React.createElement($,{style:t}))),e.React.createElement(N,{title:"Settings",icon:p.getAssetIDByName("settings")},e.React.createElement(C,{label:"Require Backticks",subLabel:"Require time to be surrounded by backticks",leading:e.React.createElement(D,{source:p.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return n.reqBackticks=!n.reqBackticks},value:n.reqBackticks}),e.React.createElement(C,{label:"Always Long Time",subLabel:["Always display ",e.React.createElement(g,{style:t.boldText},"HH:MM:SS")," instead of ",e.React.createElement(g,{style:t.boldText},"HH:MM")],leading:e.React.createElement(D,{source:p.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return n.alwaysLong=!n.alwaysLong},value:n.alwaysLong})))}const Y=T.findByProps("sendMessage","receiveMessage"),n=F.storage;let L;var G={onLoad:function(){L=x.before("sendMessage",Y,function(t){const r=t[1];let o=r?.content;if(typeof o!="string"||typeof r!="object")return;const c=n.reqBackticks?"`":"",a={otN:"[0-9]{1,2}",tN:"[0-9]{2}",abrv:"( ?(AM|PM))"},s=[`(${a.otN}:${a.tN}:${a.tN})${a.abrv}?`,`(${a.otN}:${a.tN})${a.abrv}?`,`(${a.otN})${a.abrv}`].map(function(m){return new RegExp(`${c}${m}${c}`,"gi")});for(const m of s)o=o.replace(m,function(f,b,y,R){let[l,i,d]=b.split(":").map(function(v){return parseInt(v)});if(l<0||l>24||typeof i=="number"&&(i<0||i>60)||typeof d=="number"&&(d<0||d>60))return f;R&&(R.toLowerCase()==="pm"&&l!==12?l+=12:R.toLowerCase()==="am"&&l===12&&(l=0));const S=new Date;return S.setHours(l,i??0,d??0,0),`<t:${Math.floor(S.getTime()/1e3)}:${n.alwaysLong?"T":"t"}>`});r.content=o})},onUnload:function(){return L?.()},settings:q};return M.default=G,M.vstorage=n,Object.defineProperty(M,"__esModule",{value:!0}),M})({},vendetta.metro,vendetta.metro.common,vendetta.storage,vendetta.ui.assets,vendetta.ui.components,vendetta.patcher,vendetta.plugin,vendetta.ui,vendetta.ui.toasts);
