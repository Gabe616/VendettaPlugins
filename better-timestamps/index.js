(function(m,R,e,N,E,b,w,L,d,_){"use strict";const{TextStyleSheet:x}=R.findByProps("TextStyleSheet"),{View:h,Text:C,Pressable:F}=b.General,{FormRow:H}=b.Forms;R.findByName("ActionSheet"),R.findByProps("openLazy","hideActionSheet"),R.findByProps("ActionSheetTitleHeader","ActionSheetCloseButton");function I(n){const r=R.findByProps("colors","meta"),s=R.findByStoreName("ThemeStore");return r.meta.resolveSemanticColor(s.theme,n)}function O(n){let{title:r,onPress:s,icon:i}=n;const t=e.stylesheet.createThemedStyleSheet({androidRipple:{color:d.semanticColors.ANDROID_RIPPLE},mainText:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:d.semanticColors.HEADER_SECONDARY},icon:{height:14,tintColor:d.semanticColors.HEADER_SECONDARY}}),a=s?F:h;return e.React.createElement(a,{android_ripple:t.androidRipple,disabled:!1,accessibilityRole:"button",onPress:s,style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},i&&e.React.createElement(h,{style:{marginRight:4}},e.React.createElement(H.Icon,{style:t.icon,source:i,size:"small"})),e.React.createElement(C,{style:t.mainText},r))}function D(n){let{title:r,onTitlePress:s,icon:i,children:t,padding:a}=n;const g=e.stylesheet.createThemedStyleSheet({main:{backgroundColor:d.semanticColors.BACKGROUND_TERTIARY,borderRadius:16,overflow:"hidden",flex:1}});return e.React.createElement(h,{style:{marginHorizontal:16,marginTop:16}},e.React.createElement(O,{title:r,onPress:s,icon:i}),e.React.createElement(h,{style:g.main},a?e.React.createElement(h,{style:{paddingHorizontal:16,paddingVertical:16}},t):t))}var M;(function(n){function r(i){let{children:t,onPress:a}=i;return e.React.createElement(k,{variant:"text-md/bold",onPress:a},t)}n.Bold=r;function s(i){let{children:t,onPress:a}=i;return e.React.createElement(C,{style:{textDecorationLine:"underline"},onPress:a},t)}n.Underline=s})(M||(M={}));function k(n){let{variant:r,lineClamp:s,color:i,align:t,style:a,onPress:g,getChildren:f,children:S,liveUpdate:o}=n;const[u,y]=e.React.useReducer(function(p){return~p},0),c=new Date().setMilliseconds(1e3);return o&&setTimeout(function(){return y()},c-Date.now()),e.React.createElement(C,{style:[r?x[r]:{},i?{color:I(d.semanticColors[i])}:{},t?{textAlign:t}:{},a??{}],numberOfLines:s,onPress:g},f?.()??S)}const{ScrollView:$,Text:T}=b.General,{FormSwitchRow:B,FormIcon:P}=b.Forms,{parseTimestamp:q}=R.findByProps("parseTimestamp","unparseTimestamp");function Y(n){let{style:r}=n;const[s,i]=e.React.useReducer(function(o){return~o},0),t=new Date().setMilliseconds(1e3);setTimeout(function(){return i()},t-Date.now());const a=new Date,g=[[4],[19,20],[4,18,2],a.getHours()<12&&[a.getHours()],[a.getHours(),a.getMinutes()],[a.getHours(),a.getMinutes(),a.getSeconds()]].filter(function(o){return!!o}),f=[];let S=-1;for(const[o,u,y]of g){S++;const c=new Date;c.setHours(o,u??0,y||0);let p=[c.getHours().toString(),u!==void 0&&c.getMinutes().toString().padStart(2,"0"),y!==void 0&&c.getSeconds().toString().padStart(2,"0")].filter(function(V){return!!V}).join(":");o<12&&(p+=" AM");const A=q(Math.floor(c.getTime()/1e3).toString(),l.alwaysLong?"T":"t");f.push(l.reqBackticks?e.React.createElement(T,{style:r.code},p):p),f.push(" \u2014 "),f.push(e.React.createElement(T,{style:r.timestamp,onPress:function(){return _.showToast(A.full,E.getAssetIDByName("ic_information_24px"))}},A.formatted)),S!==g.length-1&&f.push(`
`)}return e.React.createElement(e.React.Fragment,null,...f)}function z(){l.reqBackticks??=!0,l.alwaysLong??=!1,N.useProxy(l);const n=e.stylesheet.createThemedStyleSheet({mainText:{fontFamily:e.constants.Fonts.DISPLAY_NORMAL,includeFontPadding:!1,fontSize:16,color:d.semanticColors.TEXT_NORMAL},boldText:{fontFamily:e.constants.Fonts.DISPLAY_BOLD,includeFontPadding:!1,color:d.semanticColors.TEXT_NORMAL},code:{fontFamily:e.constants.Fonts.CODE_SEMIBOLD,includeFontPadding:!1,color:d.semanticColors.TEXT_NORMAL,backgroundColor:d.semanticColors.BACKGROUND_SECONDARY},timestamp:{fontFamily:e.constants.Fonts.DISPLAY_NORMAL,includeFontPadding:!1,color:d.semanticColors.TEXT_NORMAL,backgroundColor:d.semanticColors.BACKGROUND_MODIFIER_ACCENT}});return e.React.createElement($,null,e.React.createElement(D,{title:"Info",icon:E.getAssetIDByName("ic_info_24px"),padding:!0},e.React.createElement(T,{style:n.mainText},"Send a message with a time code (in",e.React.createElement(T,{style:n.boldText}," HH:MM")," or",e.React.createElement(T,{style:n.boldText}," HH:MM:SS")," format) and automatically turn it into a timestamp",`

`,e.React.createElement(Y,{style:n}))),e.React.createElement(D,{title:"Settings",icon:E.getAssetIDByName("settings")},e.React.createElement(B,{label:"Require Backticks",subLabel:"Require time to be surrounded by backticks",leading:e.React.createElement(P,{source:E.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return l.reqBackticks=!l.reqBackticks},value:l.reqBackticks}),e.React.createElement(B,{label:"Always Long Time",subLabel:["Always display ",e.React.createElement(T,{style:n.boldText},"HH:MM:SS")," instead of ",e.React.createElement(T,{style:n.boldText},"HH:MM")],leading:e.React.createElement(P,{source:E.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return l.alwaysLong=!l.alwaysLong},value:l.alwaysLong})))}const G=R.findByProps("sendMessage","receiveMessage"),l=L.storage;let v;var U={onLoad:function(){v=w.before("sendMessage",G,function(n){const r=n[1];let s=r?.content;if(typeof s!="string"||typeof r!="object")return;const i=l.reqBackticks?"`":"\\s",t={otN:"[0-9]{1,2}",tN:"[0-9]{2}",abrv:"(?: ?(AM|PM))"},a=[`(${t.otN}:${t.tN}:${t.tN})${t.abrv}?`,`(${t.otN}:${t.tN})${t.abrv}?`,`(${t.otN})${t.abrv}`].map(function(g){return new RegExp(`${i}${g}${i}`,"gi")});for(const g of a)s=s.replace(g,function(f,S,o){let[u,y,c]=S.split(":").map(function(A){return parseInt(A)});if(u<0||u>24||typeof y=="number"&&(y<0||y>60)||typeof c=="number"&&(c<0||c>60))return f;o&&(o.toLowerCase()==="pm"&&u!==12?u+=12:o.toLowerCase()==="am"&&u===12&&(u=0));const p=new Date;return p.setHours(u,y??0,c??0,0),`<t:${Math.floor(p.getTime()/1e3)}:${l.alwaysLong?"T":"t"}>`});r.content=s})},onUnload:function(){return v?.()},settings:z};return m.default=U,m.vstorage=l,Object.defineProperty(m,"__esModule",{value:!0}),m})({},vendetta.metro,vendetta.metro.common,vendetta.storage,vendetta.ui.assets,vendetta.ui.components,vendetta.patcher,vendetta.plugin,vendetta.ui,vendetta.ui.toasts);
