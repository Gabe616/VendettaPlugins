(function(E,V,u,T,x,e,p,z,G,c,C){"use strict";const F=u.findByStoreName("UserStore");function D(a){return s.commas?a.toString().split("").reverse().map(function(n,r,i){return r%3===0&&i.length>3&&r!==0?`${n},`:n}).reverse().join(""):a.toString()}function H(){return s.supportSLM&&!!Object.values(z.plugins).find(function(a){return a.manifest.name==="SplitLargeMessages"})}function U(){return F.getCurrentUser().premiumType===2?4e3:2e3}const{Animated:v}=e.ReactNative;function N(a){let{duration:n,children:r,style:i,fade:t,customOpacity:o}=a;const l=e.React.useRef(new v.Value(t==="in"?0:1)).current;return e.React.useEffect(function(){v.timing(l,{toValue:o??(t==="in"?1:0),duration:n,useNativeDriver:!0}).start()},[l,t,o]),e.React.createElement(v.View,{style:[i,{opacity:l}]},r)}const{TextStyleSheet:Y}=u.findByProps("TextStyleSheet"),{View:f,Text:b}=p.General,{FormRow:$}=p.Forms;function j(a){const n=u.findByProps("colors","meta"),r=u.findByStoreName("ThemeStore");return n.meta.resolveSemanticColor(r.theme,a)}function X(a){let{title:n,icon:r,children:i,padding:t}=a;const o=e.stylesheet.createThemedStyleSheet({mainText:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:c.semanticColors.HEADER_SECONDARY},icon:{height:14,tintColor:c.semanticColors.HEADER_SECONDARY},main:{backgroundColor:c.semanticColors.BACKGROUND_TERTIARY,borderRadius:16,overflow:"hidden",flex:1}});return e.React.createElement(f,{style:{marginHorizontal:16,marginTop:16}},e.React.createElement(f,{style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},r&&e.React.createElement(f,{style:{marginRight:4}},e.React.createElement($.Icon,{style:o.icon,source:r,size:"small"})),e.React.createElement(b,{style:o.mainText},n)),e.React.createElement(f,{style:o.main},t?e.React.createElement(f,{style:{paddingHorizontal:16,paddingVertical:16}},i):i))}var M;(function(a){function n(i){let{children:t,onPress:o}=i;return e.React.createElement(A,{variant:"text-md/bold",onPress:o},t)}a.Bold=n;function r(i){let{children:t,onPress:o}=i;return e.React.createElement(b,{style:{textDecorationLine:"underline"},onPress:o},t)}a.Underline=r})(M||(M={}));function A(a){let{variant:n,lineClamp:r,color:i,align:t,style:o,onPress:l,getChildren:h,children:S,liveUpdate:I}=a;const[d,P]=e.React.useReducer(function(_){return~_},0),m=new Date().setMilliseconds(1e3);return I&&setTimeout(function(){return P()},m-Date.now()),e.React.createElement(b,{style:[n?Y[n]:{},i?{color:j(c.semanticColors[i])}:{},t?{textAlign:t}:{},o??{}],numberOfLines:r,onPress:l},h?.()??S)}const{Text:ne,View:k,Pressable:K}=p.General,{TextStyleSheet:B}=u.findByProps("TextStyleSheet"),g=B["text-xs/semibold"].fontSize,R=e.stylesheet.createThemedStyleSheet({androidRipple:{color:c.semanticColors.ANDROID_RIPPLE,cornerRadius:8},container:{backgroundColor:c.semanticColors.BACKGROUND_TERTIARY,borderRadius:8,marginRight:8,marginTop:-12},text:{...B["text-xs/semibold"],textAlign:"right",paddingHorizontal:8,paddingVertical:8},extraMessagesCircle:{backgroundColor:c.semanticColors.REDESIGN_BUTTON_PRIMARY_BACKGROUND,borderRadius:2147483647,position:"absolute",left:0,top:0,transform:[{translateX:-g},{translateY:-g}],minWidth:g*2,height:g*2,justifyContent:"center",alignItems:"center",zIndex:2},normal:{color:c.semanticColors.TEXT_NORMAL},jinkies:{color:c.semanticColors.TEXT_DANGER}});function W(a){let{inputProps:n}=a;const[r,i]=e.React.useState(!1),t=e.React.useRef(null);n.onChangeText?T.after("onChangeText",n,function(m){let[_]=m;return t.current=_},!0):n.onChangeText=function(m){return t.current=m};const o=t.current?.length??0,l=U(),h=H()?Math.floor(o/l):0,S=o-h*l,I=R.text.fontSize*2+R.text.paddingVertical,d=o>0,P=d?K:k;return e.React.createElement(N,{duration:100,style:{flexDirection:"row-reverse",position:"absolute",right:0,top:-I,zIndex:1},fade:d?"in":"out",customOpacity:r&&d?.3:void 0},e.React.createElement(P,{android_ripple:R.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityState:{disabled:!1,expanded:!1},accessibilityLabel:"Character counter",accessibilityHint:"Tap to toggle character counter translucency",style:R.container,onPress:d?function(){return i(!r)}:void 0},e.React.createElement(N,{fade:h>0&&d?"in":"out",duration:100,style:R.extraMessagesCircle},e.React.createElement(A,{variant:"text-xs/semibold",color:"TEXT_NORMAL",style:{paddingHorizontal:g/2}},h)),e.React.createElement(A,{variant:"text-xs/semibold",color:S<=l?"TEXT_NORMAL":"TEXT_DANGER",style:{paddingHorizontal:8,paddingVertical:8}},D(S),"/",D(l))))}const{ChatInput:J}=u.findByProps("ChatInput"),{MessagesWrapper:q}=u.findByProps("MessagesWrapper");let y=[];function Q(){return y.push(T.after("render",J.prototype,function(a,n){const r=x.findInReactTree(n,function(t){return typeof t?.placeholder=="string"});if(!r?.onChangeText)return;const i=x.findInReactTree(n,function(t){return t?.type?.displayName==="View"&&Array.isArray(t?.props?.children)})?.props?.children;i&&i.unshift(React.createElement(W,{inputProps:r}))})),y.push(T.after("render",q.prototype,function(a,n){const r=x.findInReactTree(n,function(i){return i?.type?.name==="JumpToPresentButton"});r&&y.push(T.after("type",r,function(i,t){t?.props?.style&&(t.props.style[1].bottom+=32+8)}))})),function(){y.forEach(function(a){return a()}),y=[]}}const{ScrollView:Z}=p.General,{FormSwitchRow:w,FormRow:L}=p.Forms;function ee(){return s.commas??=!0,G.useProxy(s),React.createElement(Z,null,React.createElement(X,{title:"Settings",icon:C.getAssetIDByName("ic_cog_24px")},React.createElement(w,{label:"Add Thousand Seperators",subLabel:"Adds thousand seperators (1,234,567) to numbers",leading:React.createElement(L.Icon,{source:C.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return s.commas=!s.commas},value:s.commas}),React.createElement(w,{label:"Support SplitLargeMessages",leading:React.createElement(L.Icon,{source:C.getAssetIDByName("ic_message_edit")}),onValueChange:function(){return s.supportSLM=!s.supportSLM},value:s.supportSLM})))}const s=V.storage;let O;var te={onLoad:function(){return O=Q()},onUnload:function(){return O?.()},settings:ee};return E.default=te,E.vstorage=s,Object.defineProperty(E,"__esModule",{value:!0}),E})({},vendetta.plugin,vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.metro.common,vendetta.ui.components,vendetta.plugins,vendetta.storage,vendetta.ui,vendetta.ui.assets);
