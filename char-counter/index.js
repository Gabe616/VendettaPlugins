(function(m,A,s,p,h,i,u,I,b,d,T){"use strict";const{canUseIncreasedMessageLength:B}=s.findByProps("canUseIncreasedMessageLength");function S(n){return c.commas?n.toString().split("").reverse().map(function(r,e,a){return e%3===0&&a.length>3&&e!==0?`${r},`:r}).reverse().join(""):n.toString()}function w(){return Object.keys(I.plugins).find(function(n){return n.includes("SplitLargeMessages")})?1/0:B()?4e3:2e3}const{Animated:y}=i.ReactNative;function P(n){let{duration:r,children:e,style:a,fade:o}=n;const t=i.React.useRef(new y.Value(o==="in"?0:1)).current;return i.React.useEffect(function(){y.timing(t,{toValue:o==="in"?1:0,duration:r,useNativeDriver:!0}).start()},[t,o]),i.React.createElement(y.View,{style:[a,{opacity:t}]},e)}const{TextStyleSheet:_}=s.findByProps("TextStyleSheet"),{Text:D}=u.General,f=i.stylesheet.createThemedStyleSheet({text:{..._["text-xs/semibold"],backgroundColor:d.semanticColors.BACKGROUND_TERTIARY,borderRadius:8,textAlign:"right",marginRight:8,marginTop:-12,paddingHorizontal:8,paddingVertical:8},normal:{color:d.semanticColors.TEXT_NORMAL},jinkies:{color:d.semanticColors.TEXT_DANGER}});function N(n){let{thing:r}=n;const[e,a]=i.React.useState("");r.runner=function(U){return a(U)};const o=e.length,t=w(),R=f.text.fontSize*2+f.text.paddingVertical;return i.React.createElement(P,{duration:100,style:{flexDirection:"row-reverse",position:"absolute",right:0,top:-R,zIndex:1},fade:o===0?"out":"in"},i.React.createElement(D,{style:{...f.text,color:o<=t?f.normal.color:f.jinkies.color}},S(o),"/",t!==1/0?S(t):"\u221E"))}const{ChatInput:V}=s.findByProps("ChatInput"),{MessagesWrapper:F}=s.findByProps("MessagesWrapper");let l=[];function M(){return l.push(p.after("render",V.prototype,function(n,r){const e=h.findInReactTree(r,function(t){return typeof t?.placeholder=="string"});if(!e?.onChangeText)return;const a=h.findInReactTree(r,function(t){return t?.type?.displayName==="View"&&Array.isArray(t?.props?.children)})?.props?.children;if(!a)return console.log("no children");let o={runner:function(){}};e.onChangeText?l.push(p.after("onChangeText",e,function(t){let[R]=t;return o.runner(R)},!0)):e.onChangeText=function(t){return o.runner(t)},a.unshift(React.createElement(N,{thing:o}))})),l.push(p.after("render",F.prototype,function(n,r){const e=h.findInReactTree(r,function(a){return a?.type?.name==="JumpToPresentButton"});e&&l.push(p.after("type",e,function(a,o){o?.props?.style&&(o.props.style[1].bottom+=32+8)}))})),function(){l.forEach(function(n){return n()}),l=[]}}const{TextStyleSheet:$}=s.findByProps("TextStyleSheet"),{View:g,Text:E,Pressable:Y}=u.General,{FormRow:z}=u.Forms;function v(n){const r=s.findByProps("colors","meta"),e=s.findByStoreName("ThemeStore");return r.meta.resolveSemanticColor(e.theme,n)}function G(n){let{title:r,icon:e,children:a,padding:o}=n;const t=i.stylesheet.createThemedStyleSheet({mainText:{fontFamily:i.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:v(d.semanticColors.HEADER_SECONDARY)},main:{backgroundColor:v(d.semanticColors.BACKGROUND_TERTIARY),borderRadius:16,overflow:"hidden",flex:1}});return React.createElement(g,{style:{marginHorizontal:16,marginTop:16}},React.createElement(g,{style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},e&&React.createElement(g,{style:{marginRight:4}},React.createElement(z.Icon,{source:e,size:"small"})),React.createElement(E,{style:t.mainText},r)),React.createElement(g,{style:t.main},o?React.createElement(g,{style:{paddingHorizontal:16,paddingVertical:16}},a):a))}var x;(function(n){function r(e){let{children:a}=e;return React.createElement(E,{style:$["text-md/bold"]},a)}n.Bold=r})(x||(x={}));const{ScrollView:L}=u.General,{FormSwitchRow:O,FormRow:j}=u.Forms;function k(){return c.commas??=!0,b.useProxy(c),React.createElement(L,null,React.createElement(G,{title:"Settings",icon:T.getAssetIDByName("ic_cog_24px")},React.createElement(O,{label:"Add Thousand Seperators",subLabel:"Adds thousand seperators (1,234,567) to numbers",leading:React.createElement(j.Icon,{source:T.getAssetIDByName("ic_message_edit")}),onValueChange:function(){c.commas=!c.commas},value:c.commas})))}const c=A.storage;let C;var H={onLoad:function(){return C=M()},onUnload:function(){return C?.()},settings:k};return m.default=H,m.vstorage=c,Object.defineProperty(m,"__esModule",{value:!0}),m})({},vendetta.plugin,vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.metro.common,vendetta.ui.components,vendetta.plugins,vendetta.storage,vendetta.ui,vendetta.ui.assets);
