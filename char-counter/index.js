(function(g,C,i,p,h,c,u,I,b,d,R){"use strict";const{canUseIncreasedMessageLength:A}=i.findByProps("canUseIncreasedMessageLength");function T(t){return s.commas?t.toString().split("").reverse().map(function(n,e,o){return e%3===0&&o.length>3&&e!==0?`${n},`:n}).reverse().join(""):t.toString()}function B(){return Object.keys(I.plugins).find(function(t){return t.includes("SplitLargeMessages")})?1/0:A()?4e3:2e3}const{TextStyleSheet:w}=i.findByProps("TextStyleSheet"),{Text:P,View:_}=u.General,f=c.stylesheet.createThemedStyleSheet({text:{...w["text-xs/semibold"],backgroundColor:d.semanticColors.BACKGROUND_TERTIARY,borderRadius:8,textAlign:"right",marginRight:8,marginTop:-12,paddingHorizontal:8,paddingVertical:8},normal:{color:d.semanticColors.TEXT_NORMAL},jinkies:{color:d.semanticColors.TEXT_DANGER}});function D(t){let{thing:n}=t;const[e,o]=c.React.useState("");n.runner=function(H){return o(H)};const a=e.length,r=B(),y=f.text.fontSize*2+f.text.paddingVertical;return c.React.createElement(_,{style:{flexDirection:"row-reverse",position:"absolute",right:0,top:-y,zIndex:1}},c.React.createElement(P,{style:{...f.text,color:a<=r?f.normal.color:f.jinkies.color}},T(a),"/",r!==1/0?T(r):"\u221E"))}const{ChatInput:M}=i.findByProps("ChatInput"),{MessagesWrapper:N}=i.findByProps("MessagesWrapper");let l=[];function F(){return l.push(p.after("render",M.prototype,function(t,n){const e=h.findInReactTree(n,function(r){return typeof r?.placeholder=="string"});if(!e?.onChangeText)return;const o=h.findInReactTree(n,function(r){return r?.type?.displayName==="View"&&Array.isArray(r?.props?.children)})?.props?.children;if(!o)return console.log("no children");let a={runner:function(){}};e.onChangeText?l.push(p.after("onChangeText",e,function(r){let[y]=r;return a.runner(y)},!0)):e.onChangeText=function(r){return a.runner(r)},o.unshift(React.createElement(D,{thing:a}))})),l.push(p.after("render",N.prototype,function(t,n){const e=h.findInReactTree(n,function(o){return o?.type?.name==="JumpToPresentButton"});e&&l.push(p.after("type",e,function(o,a){a?.props?.style&&(a.props.style[1].bottom+=32+8)}))})),function(){l.forEach(function(t){return t()}),l=[]}}const{TextStyleSheet:V}=i.findByProps("TextStyleSheet"),{View:m,Text:S,Pressable:U}=u.General,{FormRow:z}=u.Forms;function x(t){const n=i.findByProps("colors","meta"),e=i.findByStoreName("ThemeStore");return n.meta.resolveSemanticColor(e.theme,t)}function G(t){let{title:n,icon:e,children:o,padding:a}=t;const r=c.stylesheet.createThemedStyleSheet({mainText:{fontFamily:c.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:x(d.semanticColors.HEADER_SECONDARY)},main:{backgroundColor:x(d.semanticColors.BACKGROUND_TERTIARY),borderRadius:16,overflow:"hidden",flex:1}});return React.createElement(m,{style:{marginHorizontal:16,marginTop:16}},React.createElement(m,{style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},e&&React.createElement(m,{style:{marginRight:4}},React.createElement(z.Icon,{source:e,size:"small"})),React.createElement(S,{style:r.mainText},n)),React.createElement(m,{style:r.main},a?React.createElement(m,{style:{paddingHorizontal:16,paddingVertical:16}},o):o))}var E;(function(t){function n(e){let{children:o}=e;return React.createElement(S,{style:V["text-md/bold"]},o)}t.Bold=n})(E||(E={}));const{ScrollView:L}=u.General,{FormSwitchRow:O,FormRow:$}=u.Forms;function j(){return s.commas??=!0,b.useProxy(s),React.createElement(L,null,React.createElement(G,{title:"Settings",icon:R.getAssetIDByName("ic_cog_24px")},React.createElement(O,{label:"Add Thousand Seperators",subLabel:"Adds thousand seperators (1,234,567) to numbers",leading:React.createElement($.Icon,{source:R.getAssetIDByName("ic_message_edit")}),onValueChange:function(){s.commas=!s.commas},value:s.commas})))}const s=C.storage;let v;var k={onLoad:function(){return v=F()},onUnload:function(){return v?.()},settings:j};return g.default=k,g.vstorage=s,Object.defineProperty(g,"__esModule",{value:!0}),g})({},vendetta.plugin,vendetta.metro,vendetta.patcher,vendetta.utils,vendetta.metro.common,vendetta.ui.components,vendetta.plugins,vendetta.storage,vendetta.ui,vendetta.ui.assets);
