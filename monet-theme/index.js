(function(y,O,e,m,b,l,c,L,f,N,$,Y,J){"use strict";const{TextStyleSheet:K}=b.findByProps("TextStyleSheet"),{View:p,Text:S,Pressable:q}=m.General,{FormRow:Z}=m.Forms;function Q(t){const r=b.findByProps("colors","meta"),a=b.findByStoreName("ThemeStore");return r.meta.resolveSemanticColor(a.theme,t)}function M(t){let{title:r,onTitlePress:a,icon:n,children:i,padding:o}=t;const s=e.stylesheet.createThemedStyleSheet({androidRipple:{color:l.semanticColors.ANDROID_RIPPLE},mainText:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:l.semanticColors.HEADER_SECONDARY},icon:{height:14,tintColor:l.semanticColors.HEADER_SECONDARY},main:{backgroundColor:l.semanticColors.BACKGROUND_TERTIARY,borderRadius:16,overflow:"hidden",flex:1}}),h=a?q:p;return e.React.createElement(p,{style:{marginHorizontal:16,marginTop:16}},e.React.createElement(h,{android_ripple:s.androidRipple,disabled:!1,accessibilityRole:"button",onPress:a,style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},n&&e.React.createElement(p,{style:{marginRight:4}},e.React.createElement(Z.Icon,{style:s.icon,source:n,size:"small"})),e.React.createElement(S,{style:s.mainText},r)),e.React.createElement(p,{style:s.main},o?e.React.createElement(p,{style:{paddingHorizontal:16,paddingVertical:16}},i):i))}function ee(t){let{addPadding:r}=t;const a=e.stylesheet.createThemedStyleSheet({line:{width:"100%",height:2,backgroundColor:l.semanticColors.BACKGROUND_ACCENT,borderRadius:2147483647}});return e.React.createElement(p,{style:[{marginTop:16,marginBottom:16},r&&{marginHorizontal:16}]},e.React.createElement(p,{style:a.line}))}var _;(function(t){function r(n){let{children:i,onPress:o}=n;return e.React.createElement(R,{variant:"text-md/bold",onPress:o},i)}t.Bold=r;function a(n){let{children:i,onPress:o}=n;return e.React.createElement(S,{style:{textDecorationLine:"underline"},onPress:o},i)}t.Underline=a})(_||(_={}));function R(t){let{variant:r,lineClamp:a,color:n,align:i,style:o,onPress:s,getChildren:h,children:g,liveUpdate:d}=t;const[x,B]=e.React.useReducer(function(Ee){return~Ee},0),be=new Date().setMilliseconds(1e3);return d&&setTimeout(function(){return B()},be-Date.now()),e.React.createElement(S,{style:[r?K[r]:{},n?{color:Q(l.semanticColors[n])}:{},i?{textAlign:i}:{},o??{}],numberOfLines:a,onPress:s},h?.()??g)}function te(t){let{onPress:r,icon:a,style:n,destructive:i}=t;const o=e.stylesheet.createThemedStyleSheet({headerStyleIcon:{width:24,height:24,marginRight:10,tintColor:l.semanticColors.HEADER_PRIMARY},cardStyleIcon:{width:22,height:22,marginLeft:5,tintColor:l.semanticColors.INTERACTIVE_NORMAL},destructiveIcon:{tintColor:l.semanticColors.TEXT_DANGER}});return e.React.createElement(e.ReactNative.TouchableOpacity,{onPress:r},e.React.createElement(e.ReactNative.Image,{style:[typeof n=="string"?n==="header"?o.headerStyleIcon:o.cardStyleIcon:n,i&&o.destructiveIcon].filter(function(s){return!!s}),source:a}))}const{View:re,Pressable:ne}=m.General;function C(t){let{title:r,color:a}=t;const n=e.stylesheet.createThemedStyleSheet({androidRipple:{color:l.semanticColors.ANDROID_RIPPLE,cornerRadius:2147483647}});return React.createElement(re,{style:{flexDirection:"column",alignItems:"center",justifyContent:"center"}},React.createElement(ne,{android_ripple:n.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityState:{disabled:!1,expanded:!1},accessibilityLabel:`${r} Color Preview`,accessibilityHint:`Shows the ${r} color used in this theme`,style:{width:48,aspectRatio:1,backgroundColor:a,borderRadius:2147483647,marginBottom:8,marginHorizontal:10},onPress:function(){}}),React.createElement(R,{variant:"text-md/semibold",color:"TEXT_NORMAL"},r))}function D(t){const r=Number(t.split("_")[1]);if(l.rawColors[t])return l.rawColors[t];if(t.startsWith("N1_"))return E(u.colors.neutral1,r);if(t.startsWith("N2_"))return E(u.colors.neutral2,r);if(t.startsWith("A1_"))return E(u.colors.accent1,r);if(t.startsWith("A2_"))return E(u.colors.accent2,r);if(t.startsWith("A3_"))return E(u.colors.accent3,r);if(t.match(/^#(?:[0-9a-f]{6})|(?:[0-9a-f]{3})$/))return t}function E(t,r,a){a??=1;const n=e.chroma.hex(t).lab(),i=(500-r)/1e3*2;return n[0]+=n[0]*i*a,e.chroma.lab(...n).hex()}function ae(t){const r={name:"Material You Theme 1.0.43",description:"A Discord theme with Material You theming.",authors:[{name:"nexpid",id:"853550207039832084"},{name:"Taki_Shiwa",id:"466968658997149706"}],semanticColors:{},rawColors:{},spec:2};for(const[a,n]of Object.entries(t.replacers)){const i=D(n[0]);if(i)for(const o of Object.keys(l.rawColors).filter(function(s){return s.startsWith(`${a.split("_")[0]}_`)})){const s=Number(o.split("_")[1]);let h=!0;for(const d of a.split("_").slice(1)){if(!h)break;d.startsWith(">=")?h=s>=Number(d.slice(2)):d.startsWith("<=")?h=s<=Number(d.slice(2)):d.startsWith(">")?h=s>Number(d.slice(1)):d.startsWith("<")&&(h=s<Number(d.slice(1)))}if(!h)continue;const g=n[1];r.rawColors[o]=E(i,s,g)}}for(const[a,n]of Object.entries(t.semantic))r.semanticColors[a]=[D(n)];for(const[a,n]of Object.entries(t.raw))r.rawColors[a]=D(n);return console.log(JSON.stringify(r)),JSON.parse(JSON.stringify(r))}const{View:v,Pressable:ie}=m.General;function V(t){let{commit:r,list:a,onPress:n}=t;const i=e.stylesheet.createThemedStyleSheet({androidRipple:{color:l.semanticColors.ANDROID_RIPPLE,cornerRadius:8},container:{backgroundColor:l.semanticColors.BACKGROUND_SECONDARY_ALT,flexDirection:"column",borderRadius:8}}),o=n?ie:v;return React.createElement(v,{style:a?{paddingHorizontal:12,paddingTop:12}:{paddingHorizontal:16,paddingTop:16}},React.createElement(o,{android_ripple:i.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityState:{disabled:!1,expanded:!1},accessibilityLabel:"Commit",onPress:function(){return n()},style:i.container},React.createElement(v,{style:{marginHorizontal:12,marginVertical:12}},React.createElement(v,{style:{flexDirection:"row",marginBottom:4}},React.createElement(e.ReactNative.Image,{style:{width:20,height:20,borderRadius:2147483647,marginRight:8},source:{uri:r.committer.avatar_url}}),React.createElement(R,{style:{marginRight:8},variant:"text-sm/semibold",color:"TEXT_NORMAL"},r.committer.login),React.createElement(R,{style:{marginRight:8},variant:"text-sm/semibold",color:"TEXT_NORMAL"},"\u2022"),React.createElement(R,{color:"TEXT_NORMAL",style:{fontFamily:e.constants.Fonts.CODE_SEMIBOLD}},r.sha.slice(0,7))),React.createElement(R,{variant:"text-md/semibold",color:"TEXT_NORMAL"},r.commit.message))))}const{ScrollView:oe}=m.General,ce=function(){return P?React.createElement(oe,null,P.map(function(t){return React.createElement(V,{commit:t,list:!0,onPress:function(){return e.url.openURL(t.html_url)}})})):React.createElement(e.ReactNative.ActivityIndicator,{style:{flex:1}})};function se(t){t.push("VendettaCustomPage",{render:ce,title:"Commits"})}function le(t){return JSON.parse(t.replace(/\r/g,"").replace(/\/\/.*$/gm,"").replace(/\/\*(?:.|\n)*?(?=\*\/)\*\//g,""))}var k={github:{url:"https://github.com/Gabe616/VendettaPlugins/"}};const{showSimpleActionSheet:de}=b.findByProps("showSimpleActionSheet"),ue=b.findByStoreName("UserStore");function he(){const t=$.getDebugInfo(),r=e.ReactNative.NativeModules.InfoDictionaryManager??e.ReactNative.NativeModules.RTNClientInfoManager;return`Device: ${t.os.name==="iOS"?t.device.codename:`${t.device.brand} ${t.device.model}`}
Model: ${t.device.model}
Manufacturer: ${t.device.manufacturer}
Brand: ${t.device.brand}

OS: ${t.os.name}
Version: ${t.os.version}

Discord Branch: ${r.ReleaseChannel}
Discord Version: ${t.discord.version}
Discord Build: ${t.discord.build}
Vendetta Version: ${t.vendetta.version}

React Version: ${t.react.version}
Hermes Bytecode: ${t.hermes.bytecodeVersion}`}function H(t){const r=ue.getCurrentUser(),a=new URLSearchParams;for(const[n,i]of Object.entries(t))a.set(n,i);return a.set("discord-username",`@${r.username}${r.discriminator!=="0"?`#${r.discriminator}`:""}`),console.log(`${k.github.url}issues/new?${a.toString()}`),`${k.github.url}issues/new?${a.toString()}`}const ge=function(t){return de({key:"CardOverflow",header:{title:"GitHub Reports"},options:[{label:"Copy bug report link",icon:c.getAssetIDByName("copy"),onPress:function(){e.clipboard.setString(H({title:`bug(${t}): `,template:"bug_report.yml",labels:"bug",sysinfo:he()})),f.showToast("Copied",c.getAssetIDByName("toast_copy_link"))}},{label:"Copy feature suggestion link",icon:c.getAssetIDByName("copy"),onPress:function(){e.clipboard.setString(H({title:`suggest(${t}): `,labels:"suggestion",template:"suggestion.yml"})),f.showToast("Copied",c.getAssetIDByName("toast_copy_link"))}}]})};function U(t){return t.match(Y.HTTP_REGEX_MULTI).filter(function(r){return r.startsWith("https://repainter.app/themes/")})[0]}async function F(t){return await(await J.safeFetch(`https://repainter.app/_next/data/Z0BCpVYZyrdkss0k0zqLC/themes/${t.match(/themes\/([a-z0-9]+)/i)?.[1]??""}.json`,{cache:"no-store"})).json()}function j(t){const r=Object.values(t.pageProps.fallback)[0];if(!r)throw new Error("Invalid Repainter theme!");const a=function(i){return(i&16777215).toString(16).padStart(6,"0")},n=r.colors.map(function(i){return`#${a(i)}`});return console.log(JSON.stringify({name:r.name,colors:n})),{name:r.name,description:r.description,createdAt:new Date(r.createdAt),updatedAt:new Date(r.updatedAt),settings:r.settingsLines,likes:r.voteCount,colors:{neutral1:n[44],neutral2:n[57],accent1:n[5],accent2:n[18],accent3:n[31]}}}const{BundleUpdaterManager:Re}=window.nativeModuleProxy,{ScrollView:fe,View:I,Pressable:G}=m.General,{FormRow:A}=m.Forms,{TextStyleSheet:me}=b.findByProps("TextStyleSheet"),T=me["text-md/semibold"].fontSize,w=e.stylesheet.createThemedStyleSheet({androidRipple:{color:l.semanticColors.ANDROID_RIPPLE,cornerRadius:8},warning:{color:l.semanticColors.TEXT_DANGER},info:{color:l.semanticColors.TEXT_BRAND}}),X=function(t){u.colors={neutral1:t.neutral1[7],neutral2:t.neutral2[7],accent1:t.accent1[7],accent2:t.accent2[7],accent3:t.accent3[7]}};let P;function pe(){const t=e.NavigationNative.useNavigation(),[r,a]=e.React.useState(void 0),[n,i]=e.React.useState(void 0);P=r,u.colors??={neutral1:"#747679",neutral2:"#70777C",accent1:"#007FAC",accent2:"#657985",accent3:"#787296"},L.useProxy(u),e.React.useEffect(function(){n||fetch(z,{cache:"no-store"}).then(function(g){return g.text().then(function(d){try{i(le(d.replace(/\r/g,"")))}catch{return f.showToast("Failed to parse patches.json",c.getAssetIDByName("Small"))}})}).catch(function(){return f.showToast("Failed to fetch patches.json",c.getAssetIDByName("Small"))})},[n]),e.React.useEffect(function(){r||fetch(W,{cache:"no-store"}).then(function(g){return g.json().then(function(d){return a(d)}).catch(function(){return f.showToast("Failed to parse commits",c.getAssetIDByName("Small"))})}).catch(function(){return f.showToast("Failed to fetch commits",c.getAssetIDByName("Small"))})},[r]),e.React.useEffect(function(){F("https://repainter.app/themes/01G8B1Y6WH72151ZTQVWXP11KT").then(function(g){console.log(JSON.stringify(j(g)))})},[]),t.setOptions({headerRight:function(){return e.React.createElement(te,{style:"header",icon:c.getAssetIDByName("ic_report_message"),onPress:function(){return ge("customrpc")}})}});let o;const s=$.getDebugInfo(),h=window[window.__vendetta_loader.features.syscolors?.prop];return s.os.name!=="Android"?o={error:!1,message:"Dynamic colors are only available on Android.",onPress:function(){}}:s.os.sdk<31?o={error:!1,message:"Dynamic colors are only available on Android 12+ (SDK 31+).",onPress:function(){}}:h||(o={error:!0,message:"Dynamic colors not available. ",cta:"Fix",onPress:function(){return N.showConfirmationAlert({title:"Enable Dynamic Colors",content:"To use dynamic colors, use nexx's modified VendettaXposed (until it gets merged to the normal XPosed module)",onConfirm:function(){return e.url.openURL("https://github.com/Gabe616/VendettaMod-VendettaXposed#readme")},confirmText:"View on GitHub",cancelText:"Okay"})}}),u.colors?e.React.createElement(fe,null,o&&e.React.createElement(I,{style:{flexDirection:"row",alignItems:"center",justifyContent:"center",marginTop:8}},e.React.createElement(e.ReactNative.Image,{source:c.getAssetIDByName(o.error?"ic_warning_24px":"ic_info_24px"),style:{width:T,height:T,tintColor:o.error?w.warning.color:w.info.color,marginRight:4}}),e.React.createElement(R,{variant:"text-md/semibold",color:o.error?"TEXT_DANGER":"TEXT_BRAND"},o.message,o.cta&&e.React.createElement(_.Underline,{onPress:o.onPress},o.cta))),e.React.createElement(M,{title:"Colors",icon:c.getAssetIDByName("ic_theme_24px"),padding:!0},e.React.createElement(I,{style:{marginBottom:8,flexDirection:"row",alignItems:"center",justifyContent:"center"}},h&&e.React.createElement(G,{android_ripple:w.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityState:{disabled:!1,expanded:!1},accessibilityLabel:"Autofill button",accessibilityHint:"Autofills colors to system's dynamic colors",style:{flexDirection:"row",alignItems:"center",paddingHorizontal:4,paddingVertical:4},onPress:function(){X(h),f.showToast("Autofilled",c.getAssetIDByName("Check"))}},e.React.createElement(e.ReactNative.Image,{source:c.getAssetIDByName("img_nitro_remixing"),style:{width:T,height:T,marginRight:4}}),e.React.createElement(R,{variant:"text-md/semibold",color:"TEXT_NORMAL"},"Autofill")),h&&e.React.createElement(R,{variant:"text-md/semibold",color:"TEXT_NORMAL",style:{marginHorizontal:5}},"\u2022"),e.React.createElement(G,{android_ripple:w.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityState:{disabled:!1,expanded:!1},accessibilityLabel:"Use Repainter theme",accessibilityHint:"Inputs a Repainter theme",style:{flexDirection:"row",alignItems:"center",paddingHorizontal:4,paddingVertical:4},onPress:async function(){const g=U(await e.clipboard.getString());N.showInputAlert({title:"Enter Repainter link",placeholder:"https://repainter.app/themes/123ABC",initialValue:g,onConfirm:async function(d){const x=U(d);if(!x)throw new Error("No Repainter link found!");const B=j(await F(x));u.colors=B.colors,f.showToast("Imported",c.getAssetIDByName("toast_image_saved"))},confirmText:"Use",confirmColor:"brand",cancelText:"Cancel"})}},e.React.createElement(e.ReactNative.Image,{source:c.getAssetIDByName("ic_theme_24px"),style:{width:T,height:T,marginRight:4}}),e.React.createElement(R,{variant:"text-md/semibold",color:"TEXT_NORMAL"},"Use Repainter theme"))),e.React.createElement(I,{style:{flexDirection:"row",alignItems:"center",justifyContent:"center"}},e.React.createElement(C,{title:"Neutral 1",color:u.colors.neutral1}),e.React.createElement(C,{title:"Neutral 2",color:u.colors.neutral2}),e.React.createElement(C,{title:"Accent 1",color:u.colors.accent1}),e.React.createElement(C,{title:"Accent 2",color:u.colors.accent2}),e.React.createElement(C,{title:"Accent 3",color:u.colors.accent3}))),e.React.createElement(M,{title:"Theme",icon:c.getAssetIDByName("ic_cog_24px"),padding:!n},n?e.React.createElement(e.React.Fragment,null,r?e.React.createElement(V,{commit:r[0],onPress:function(){return se(t)}}):e.React.createElement(e.ReactNative.ActivityIndicator,{style:{flex:1,paddingTop:16}}),e.React.createElement(ee,{addPadding:!0}),e.React.createElement(A,{label:"Load Theme",leading:e.React.createElement(A.Icon,{source:c.getAssetIDByName("debug")}),onPress:function(){let g;try{g=ae(n)}catch(d){return f.showToast(d.toString(),c.getAssetIDByName("Small"))}N.showConfirmationAlert({title:"Reload required",content:"A reload is required to load this theme. Do you want to reload?",confirmText:"Reload",confirmColor:"red",cancelText:"Cancel",onConfirm:async function(){await L.createFileBackend("vendetta_theme.json").set({id:O.id,selected:!0,data:g}),Re.reload()}})}}),e.React.createElement(A,{label:"Reload Theme Patches",leading:e.React.createElement(A.Icon,{source:c.getAssetIDByName("ic_sync_24px")}),onPress:function(){a(void 0),i(void 0)}})):e.React.createElement(e.ReactNative.ActivityIndicator,{style:{flex:1}}))):(h?X(h):u.colors={neutral1:"#747679",neutral2:"#70777C",accent1:"#007FAC",accent2:"#657985",accent3:"#787296"},e.React.createElement(e.React.Fragment,null))}const u=O.storage,z="https://raw.githubusercontent.com/Gabe616/VendettaMonetTheme/master/patches.jsonc",W="https://api.github.com/repos/Gabe616/VendettaMonetTheme/commits?path=patches.jsonc";var ye={settings:pe};return y.commitsURL=W,y.default=ye,y.patchesURL=z,y.vstorage=u,Object.defineProperty(y,"__esModule",{value:!0}),y})({},vendetta.plugin,vendetta.metro.common,vendetta.ui.components,vendetta.metro,vendetta.ui,vendetta.ui.assets,vendetta.storage,vendetta.ui.toasts,vendetta.ui.alerts,vendetta.debug,vendetta.constants,vendetta.utils);
