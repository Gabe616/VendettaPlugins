(function(y,D,e,h,C,c,f,P,T,I,V){"use strict";const{TextStyleSheet:G}=C.findByProps("TextStyleSheet"),{View:g,Text:A,Pressable:H}=h.General,{FormRow:U}=h.Forms;function k(t){const r=C.findByProps("colors","meta"),n=C.findByStoreName("ThemeStore");return r.meta.resolveSemanticColor(n.theme,t)}function O(t){let{title:r,onTitlePress:n,icon:a,children:l,padding:i}=t;const o=e.stylesheet.createThemedStyleSheet({androidRipple:{color:c.semanticColors.ANDROID_RIPPLE},mainText:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:14,includeFontPadding:!1,letterSpacing:void 0,lineHeight:18,textTransform:"none",color:c.semanticColors.HEADER_SECONDARY},icon:{height:14,tintColor:c.semanticColors.HEADER_SECONDARY},main:{backgroundColor:c.semanticColors.BACKGROUND_TERTIARY,borderRadius:16,overflow:"hidden",flex:1}}),d=n?H:g;return e.React.createElement(g,{style:{marginHorizontal:16,marginTop:16}},e.React.createElement(d,{android_ripple:o.androidRipple,disabled:!1,accessibilityRole:"button",onPress:n,style:{marginBottom:8,flexDirection:"row",justifyContent:"flex-start",alignItems:"center"}},a&&e.React.createElement(g,{style:{marginRight:4}},e.React.createElement(U.Icon,{style:o.icon,source:a,size:"small"})),e.React.createElement(A,{style:o.mainText},r)),e.React.createElement(g,{style:o.main},i?e.React.createElement(g,{style:{paddingHorizontal:16,paddingVertical:16}},l):l))}function X(t){let{addPadding:r}=t;const n=e.stylesheet.createThemedStyleSheet({line:{width:"100%",height:2,backgroundColor:c.semanticColors.BACKGROUND_ACCENT,borderRadius:2147483647}});return e.React.createElement(g,{style:[{marginTop:16,marginBottom:16},r&&{marginHorizontal:16}]},e.React.createElement(g,{style:n.line}))}var S;(function(t){function r(a){let{children:l,onPress:i}=a;return e.React.createElement(p,{variant:"text-md/bold",onPress:i},l)}t.Bold=r;function n(a){let{children:l,onPress:i}=a;return e.React.createElement(A,{style:{textDecorationLine:"underline"},onPress:i},l)}t.Underline=n})(S||(S={}));function p(t){let{variant:r,lineClamp:n,color:a,align:l,style:i,onPress:o,getChildren:d,children:m,liveUpdate:u}=t;const[ce,ie]=e.React.useReducer(function(oe){return~oe},0),le=new Date().setMilliseconds(1e3);return u&&setTimeout(function(){return ie()},le-Date.now()),e.React.createElement(A,{style:[r?G[r]:{},a?{color:k(c.semanticColors[a])}:{},l?{textAlign:l}:{},i??{}],numberOfLines:n,onPress:o},d?.()??m)}const{View:W,Pressable:$}=h.General;function b(t){let{title:r,color:n}=t;const a=e.stylesheet.createThemedStyleSheet({androidRipple:{color:c.semanticColors.ANDROID_RIPPLE,cornerRadius:2147483647}});return React.createElement(W,{style:{flexDirection:"column",alignItems:"center",justifyContent:"center"}},React.createElement($,{android_ripple:a.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityState:{disabled:!1,expanded:!1},accessibilityLabel:`${r} Color Preview`,accessibilityHint:`Shows the ${r} color used in this theme`,style:{width:48,aspectRatio:1,backgroundColor:n,borderRadius:2147483647,marginBottom:8,marginHorizontal:10},onPress:function(){}}),React.createElement(p,{variant:"text-md/semibold",color:"TEXT_NORMAL"},r))}function _(t){const r=Number(t.split("_")[1]);if(c.rawColors[t])return c.rawColors[t];if(t.startsWith("N1_"))return E(s.colors.neutral1,r);if(t.startsWith("N2_"))return E(s.colors.neutral2,r);if(t.startsWith("A1_"))return E(s.colors.accent1,r);if(t.startsWith("A2_"))return E(s.colors.accent2,r);if(t.startsWith("A3_"))return E(s.colors.accent3,r);if(t.match(/^#(?:[0-9a-f]{6})|(?:[0-9a-f]{3})$/))return t}function E(t,r,n){n??=1;const a=e.chroma.hex(t).lab(),l=(500-r)/1e3*2;return a[0]+=a[0]*l*n,e.chroma.lab(...a).hex()}function Y(t){const r={name:"Material You Theme 1.0.43",description:"A Discord theme with Material You theming.",authors:[{name:"nexpid",id:"853550207039832084"},{name:"Taki_Shiwa",id:"466968658997149706"}],semanticColors:{},rawColors:{},spec:2};for(const[n,a]of Object.entries(t.replacers)){const l=_(a[0]);if(l)for(const i of Object.keys(c.rawColors).filter(function(o){return o.startsWith(`${n.split("_")[0]}_`)})){const o=Number(i.split("_")[1]);let d=!0;for(const u of n.split("_").slice(1)){if(!d)break;u.startsWith(">=")?d=o>=Number(u.slice(2)):u.startsWith("<=")?d=o<=Number(u.slice(2)):u.startsWith(">")?d=o>Number(u.slice(1)):u.startsWith("<")&&(d=o<Number(u.slice(1)))}if(!d)continue;const m=a[1];r.rawColors[i]=E(l,o,m)}}for(const[n,a]of Object.entries(t.semantic))r.semanticColors[n]=[_(a)];for(const[n,a]of Object.entries(t.raw))r.rawColors[n]=_(a);return console.log(JSON.stringify(r)),JSON.parse(JSON.stringify(r))}const{View:w,Pressable:J}=h.General;function B(t){let{commit:r,list:n,onPress:a}=t;const l=e.stylesheet.createThemedStyleSheet({androidRipple:{color:c.semanticColors.ANDROID_RIPPLE,cornerRadius:8},container:{backgroundColor:c.semanticColors.BACKGROUND_SECONDARY_ALT,flexDirection:"column",borderRadius:8}}),i=a?J:w;return React.createElement(w,{style:n?{paddingHorizontal:12,paddingTop:12}:{paddingHorizontal:16,paddingTop:16}},React.createElement(i,{android_ripple:l.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityState:{disabled:!1,expanded:!1},accessibilityLabel:"Commit",onPress:function(){return a()},style:l.container},React.createElement(w,{style:{marginHorizontal:12,marginVertical:12}},React.createElement(w,{style:{flexDirection:"row",marginBottom:4}},React.createElement(e.ReactNative.Image,{style:{width:20,height:20,borderRadius:2147483647,marginRight:8},source:{uri:r.committer.avatar_url}}),React.createElement(p,{style:{marginRight:8},variant:"text-sm/semibold",color:"TEXT_NORMAL"},r.committer.login),React.createElement(p,{style:{marginRight:8},variant:"text-sm/semibold",color:"TEXT_NORMAL"},"\u2022"),React.createElement(p,{color:"TEXT_NORMAL",style:{fontFamily:e.constants.Fonts.CODE_SEMIBOLD}},r.sha.slice(0,7))),React.createElement(p,{variant:"text-md/semibold",color:"TEXT_NORMAL"},r.commit.message))))}const{ScrollView:K}=h.General,q=function(){return v?React.createElement(K,null,v.map(function(t){return React.createElement(B,{commit:t,list:!0,onPress:function(){return e.url.openURL(t.html_url)}})})):React.createElement(e.ReactNative.ActivityIndicator,{style:{flex:1}})};function Q(t){t.push("VendettaCustomPage",{render:q,title:"Commits"})}function Z(t){return JSON.parse(t.replace(/\r/g,"").replace(/\/\/.*$/gm,"").replace(/\/\*(?:.|\n)*?(?=\*\/)\*\//g,""))}const{BundleUpdaterManager:ee}=window.nativeModuleProxy,{ScrollView:te,View:L,Text:F,Pressable:re}=h.General,{FormRow:x}=h.Forms,{TextStyleSheet:N}=C.findByProps("TextStyleSheet"),R=e.stylesheet.createThemedStyleSheet({androidRipple:{color:c.semanticColors.ANDROID_RIPPLE,cornerRadius:8},warning:{...N["text-md/semibold"],color:c.semanticColors.TEXT_DANGER},info:{...N["text-md/semibold"],color:c.semanticColors.TEXT_BRAND},text:{...N["text-md/semibold"],color:c.semanticColors.TEXT_NORMAL}}),M=function(t){s.colors={neutral1:t.neutral1[7],neutral2:t.neutral2[7],accent1:t.accent1[7],accent2:t.accent2[7],accent3:t.accent3[7]}};let v;function ae(){const t=e.NavigationNative.useNavigation(),[r,n]=e.React.useState(void 0),[a,l]=e.React.useState(void 0);v=r,s.colors??={neutral1:"#747679",neutral2:"#70777C",accent1:"#007FAC",accent2:"#657985",accent3:"#787296"},P.useProxy(s),e.React.useEffect(function(){a||fetch(j,{cache:"no-store"}).then(async function(m){try{const u=(await m.text()).replace(/\r/g,"");l(Z(u))}catch{return T.showToast("Failed to parse patches.json",f.getAssetIDByName("Small"))}}).catch(function(){return T.showToast("Failed to fetch patches.json",f.getAssetIDByName("Small"))})},[a]),e.React.useEffect(function(){r||fetch(z,{cache:"no-store"}).then(async function(m){try{const u=await m.json();n(u)}catch{return T.showToast("Failed to parse commits",f.getAssetIDByName("Small"))}})},[r]);let i;const o=V.getDebugInfo(),d=window[window.__vendetta_loader.features.syscolors?.prop];return o.os.name!=="Android"?i={error:!1,message:"Dynamic colors are only available on Android.",onPress:function(){}}:o.os.sdk<32?i={error:!1,message:"Dynamic colors are only available on Android 12+ (SDK 32+).",onPress:function(){}}:d||(i={error:!0,message:"Dynamic colors not available. ",cta:"Fix",onPress:function(){return I.showConfirmationAlert({title:"Enable Dynamic Colors",content:"To use dynamic colors, use nexx's modified VendettaXposed (until it gets merged to the normal XPosed module)",onConfirm:function(){return e.url.openURL("https://github.com/Gabe616/VendettaMod-VendettaXposed#readme")},confirmText:"View on GitHub",cancelText:"Okay"})}}),s.colors?e.React.createElement(te,null,i&&e.React.createElement(L,{style:{flexDirection:"row",alignItems:"center",justifyContent:"center",marginTop:8}},e.React.createElement(e.ReactNative.Image,{source:f.getAssetIDByName(i.error?"ic_warning_24px":"ic_info_24px"),style:{width:i.error?R.warning.fontSize:R.info.fontSize,height:i.error?R.warning.fontSize:R.info.fontSize,tintColor:i.error?R.warning.color:R.info.color,marginRight:4}}),e.React.createElement(F,{style:i.error?R.warning:R.info},i.message,i.cta&&e.React.createElement(S.Underline,{onPress:i.onPress},i.cta))),e.React.createElement(O,{title:"Colors",icon:f.getAssetIDByName("ic_theme_24px"),padding:!0},d&&e.React.createElement(re,{android_ripple:R.androidRipple,disabled:!1,accessibilityRole:"button",accessibilityState:{disabled:!1,expanded:!1},accessibilityLabel:"Autofill button",accessibilityHint:"Autofills colors to system's dynamic colors",style:{flexDirection:"row",alignItems:"center",justifyContent:"center",marginBottom:8},onPress:function(){return M(d)}},e.React.createElement(e.ReactNative.Image,{source:f.getAssetIDByName("img_nitro_remixing"),style:{width:R.text.fontSize,height:R.text.fontSize,tintColor:R.text.color,marginRight:4}}),e.React.createElement(F,{style:R.text},"Autofill")),e.React.createElement(L,{style:{flexDirection:"row",alignItems:"center",justifyContent:"center"}},e.React.createElement(b,{title:"Neutral 1",color:s.colors.neutral1}),e.React.createElement(b,{title:"Neutral 2",color:s.colors.neutral2}),e.React.createElement(b,{title:"Accent 1",color:s.colors.accent1}),e.React.createElement(b,{title:"Accent 2",color:s.colors.accent2}),e.React.createElement(b,{title:"Accent 3",color:s.colors.accent3}))),e.React.createElement(O,{title:"Theme",icon:f.getAssetIDByName("cog_24px"),padding:!a},a?e.React.createElement(e.React.Fragment,null,r?e.React.createElement(B,{commit:r[0],onPress:function(){return Q(t)}}):e.React.createElement(e.ReactNative.ActivityIndicator,{style:{flex:1,paddingTop:16}}),e.React.createElement(X,{addPadding:!0}),e.React.createElement(x,{label:"Load Theme",leading:e.React.createElement(x.Icon,{source:f.getAssetIDByName("debug")}),onPress:function(){let m;try{m=Y(a)}catch(u){return T.showToast(u.toString(),f.getAssetIDByName("Small"))}I.showConfirmationAlert({title:"Reload required",content:"A reload is required to load this theme. Do you want to reload?",confirmText:"Reload",confirmColor:"red",cancelText:"Cancel",onConfirm:async function(){await P.createFileBackend("vendetta_theme.json").set({id:D.id,selected:!0,data:m}),ee.reload()}})}}),e.React.createElement(x,{label:"Reload Theme Patches",leading:e.React.createElement(x.Icon,{source:f.getAssetIDByName("ic_sync_24px")}),onPress:function(){n(void 0),l(void 0)}})):e.React.createElement(e.ReactNative.ActivityIndicator,{style:{flex:1}}))):(d?M(d):s.colors={neutral1:"#747679",neutral2:"#70777C",accent1:"#007FAC",accent2:"#657985",accent3:"#787296"},e.React.createElement(e.React.Fragment,null))}const s=D.storage,j="https://raw.githubusercontent.com/Gabe616/VendettaMonetTheme/master/patches.jsonc",z="https://api.github.com/repos/Gabe616/VendettaMonetTheme/commits?path=patches.jsonc";var ne={settings:ae};return y.commitsURL=z,y.default=ne,y.patchesURL=j,y.vstorage=s,Object.defineProperty(y,"__esModule",{value:!0}),y})({},vendetta.plugin,vendetta.metro.common,vendetta.ui.components,vendetta.metro,vendetta.ui,vendetta.ui.assets,vendetta.storage,vendetta.ui.toasts,vendetta.ui.alerts,vendetta.debug);
